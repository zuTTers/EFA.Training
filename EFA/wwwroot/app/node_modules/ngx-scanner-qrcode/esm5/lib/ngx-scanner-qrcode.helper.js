var _this = this;
/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { AsyncSubject } from "rxjs";
import { CONFIG_DEFAULT } from "./ngx-scanner-qrcode.default";
/**
 * OVERRIDES
 * \@param variableKey
 * \@param config
 * \@param defaultConfig
 * \@return
 * @type {?}
 */
export var OVERRIDES = (/**
 * @param {?} variableKey
 * @param {?} config
 * @param {?} defaultConfig
 * @return {?}
 */
function (variableKey, config, defaultConfig) {
    var _a;
    if (config && Object.keys(config[variableKey]).length) {
        for (var key in defaultConfig) {
            /** @type {?} */
            var cloneDeep = JSON.parse(JSON.stringify(tslib_1.__assign({}, config[variableKey], (_a = {}, _a[key] = ((/** @type {?} */ (defaultConfig)))[key], _a))));
            config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;
        }
        return config[variableKey];
    }
    else {
        return defaultConfig;
    }
});
/**
 * Rxjs complete
 * \@param as
 * \@param data
 * \@param error
 * @type {?}
 */
export var AS_COMPLETE = (/**
 * @param {?} as
 * @param {?} data
 * @param {?=} error
 * @return {?}
 */
function (as, data, error) {
    if (error === void 0) { error = null; }
    error ? as.error(error) : as.next(data);
    as.complete();
});
/**
 * CAMERA_BEEP
 * \@param isPlay
 * \@return
 * @type {?}
 */
export var PLAY_AUDIO = (/**
 * @param {?=} isPlay
 * @return {?}
 */
function (isPlay) {
    if (isPlay === void 0) { isPlay = false; }
    if (isPlay === false)
        return;
    /** @type {?} */
    var audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU' + Array(300).join('101'));
    // when the sound has been loaded, execute your code
    audio.oncanplaythrough = (/**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var promise = audio.play();
        if (promise) {
            promise.catch((/**
             * @param {?} e
             * @return {?}
             */
            function (e) {
                if (e.name === "NotAllowedError" || e.name === "NotSupportedError") {
                    // console.log(e.name);
                }
            }));
        }
    });
});
/**
 * HAS_OWN_PROPERTY
 * Fix issue vs ng v 6-7-8
 * Optional chaining (?.) just have on ng v 9++
 * eg: HAS_OWN_PROPERTY(config, 'frameOptions.style') // output: boolean
 * \@param obj
 * \@param propertyPath
 * \@return
 * @type {?}
 */
export var HAS_OWN_PROPERTY = (/**
 * @param {?} obj
 * @param {?} propertyPath
 * @return {?}
 */
function (obj, propertyPath) {
    /** @type {?} */
    var properties = propertyPath.split(".");
    for (var i = 0; i < properties.length; i++) {
        /** @type {?} */
        var prop = properties[i];
        if (!obj.hasOwnProperty(prop)) {
            return false;
        }
        else {
            obj = obj[prop];
        }
    }
    return true;
});
/**
 * DRAW_RESULT_APPEND_CHILD
 * \@param code
 * \@param oriCanvas
 * \@param elTarget
 * @type {?}
 */
export var DRAW_RESULT_APPEND_CHILD = (/**
 * @param {?} code
 * @param {?} oriCanvas
 * @param {?} elTarget
 * @return {?}
 */
function (code, oriCanvas, elTarget) {
    /** @type {?} */
    var widthZoom;
    /** @type {?} */
    var heightZoom;
    /** @type {?} */
    var oriWidth = oriCanvas.width;
    /** @type {?} */
    var oriHeight = oriCanvas.height;
    /** @type {?} */
    var oriWHRatio = oriWidth / oriHeight;
    /** @type {?} */
    var imgWidth = parseInt(getComputedStyle(oriCanvas).width);
    /** @type {?} */
    var imgHeight = parseInt(getComputedStyle(oriCanvas).height);
    /** @type {?} */
    var imgWHRatio = imgWidth / imgHeight;
    elTarget.innerHTML = '';
    if (oriWHRatio > imgWHRatio) {
        widthZoom = imgWidth / oriWidth;
        heightZoom = imgWidth / oriWHRatio / oriHeight;
    }
    else {
        heightZoom = imgHeight / oriHeight;
        widthZoom = (imgHeight * oriWHRatio) / oriWidth;
    }
    for (var i = 0; i < code.length; i++) {
        /** @type {?} */
        var _code = code[i];
        // New canvas
        /** @type {?} */
        var cvs = document.createElement("canvas");
        /** @type {?} */
        var ctx = (/** @type {?} */ (cvs.getContext('2d', { willReadFrequently: true })));
        /** @type {?} */
        var loc = {};
        /** @type {?} */
        var X = [];
        /** @type {?} */
        var Y = [];
        // Point x,y
        /** @type {?} */
        var points = _code.points;
        for (var j = 0; j < points.length; j++) {
            /** @type {?} */
            var xj = HAS_OWN_PROPERTY(points, j + ".x") ? points[j].x : 0;
            /** @type {?} */
            var yj = HAS_OWN_PROPERTY(points, j + ".y") ? points[j].y : 0;
            loc["x" + (j + 1)] = xj;
            loc["y" + (j + 1)] = yj;
            X.push(xj);
            Y.push(yj);
        }
        // Min max
        /** @type {?} */
        var maxX = Math.max.apply(Math, tslib_1.__spread(X));
        /** @type {?} */
        var minX = Math.min.apply(Math, tslib_1.__spread(X));
        /** @type {?} */
        var maxY = Math.max.apply(Math, tslib_1.__spread(Y));
        /** @type {?} */
        var minY = Math.min.apply(Math, tslib_1.__spread(Y));
        // Add class
        cvs.setAttribute('class', 'qrcode-polygon');
        // Size with screen zoom
        if (oriWHRatio > imgWHRatio) {
            cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + "px";
            cvs.style.left = minX * widthZoom + "px";
            cvs.width = (maxX - minX) * widthZoom;
            cvs.height = (maxY - minY) * widthZoom;
        }
        else {
            cvs.style.top = minY * heightZoom + "px";
            cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
            cvs.width = (maxX - minX) * heightZoom;
            cvs.height = (maxY - minY) * heightZoom;
        }
        // Style for canvas
        ctx.lineWidth = 1;
        ctx.strokeStyle = 'green';
        ctx.fillStyle = "#55f02880";
        // polygon [x,y, x,y, x,y.....];
        /** @type {?} */
        var polygon = [];
        for (var k = 0; k < X.length; k++) {
            polygon.push((loc["x" + (k + 1)] - minX) * heightZoom);
            polygon.push((loc["y" + (k + 1)] - minY) * widthZoom);
        }
        // Copy array
        /** @type {?} */
        var shape = (/** @type {?} */ (polygon.slice(0)));
        // Draw polygon
        ctx.beginPath();
        ctx.moveTo(shape.shift(), shape.shift());
        while (shape.length) {
            ctx.lineTo(shape.shift(), shape.shift()); //x,y
        }
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        // Tooltip result
        /** @type {?} */
        var qrcodeTooltipTemp = document.createElement('div');
        qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');
        qrcodeTooltipTemp.innerText = _code.value;
        // Tooltip box
        /** @type {?} */
        var qrcodeTooltip = document.createElement('div');
        qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');
        qrcodeTooltip.appendChild(qrcodeTooltipTemp);
        heightZoom = imgHeight / oriHeight;
        widthZoom = (imgHeight * oriWHRatio) / oriWidth;
        qrcodeTooltip.style.fontSize = widthZoom * 15 + 'px';
        qrcodeTooltip.style.top = minY * heightZoom + "px";
        qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
        qrcodeTooltip.style.width = (maxX - minX) * heightZoom + "px";
        qrcodeTooltip.style.height = (maxY - minY) * heightZoom + "px";
        // Result text
        /** @type {?} */
        var resultText = document.createElement('span');
        resultText.innerText = _code.value;
        resultText.style.fontSize = widthZoom * 13 + 'px';
        // Set position result text
        resultText.style.top = minY * heightZoom + (-20 * heightZoom) + "px";
        resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
        if (elTarget) {
            elTarget.appendChild(qrcodeTooltip);
            elTarget.appendChild(resultText);
            elTarget.appendChild(cvs);
        }
    }
    ;
})
/**
 * DRAW_RESULT_ON_CANVAS
 * @param code
 * @param cvs
 */
;
/**
 * DRAW_RESULT_ON_CANVAS
 * \@param code
 * \@param cvs
 * @type {?}
 */
export var DRAW_RESULT_ON_CANVAS = (/**
 * @param {?} code
 * @param {?} cvs
 * @return {?}
 */
function (code, cvs) {
    /** @type {?} */
    var ctx = (/** @type {?} */ (cvs.getContext('2d', { willReadFrequently: true })));
    for (var i = 0; i < code.length; i++) {
        /** @type {?} */
        var _code = code[i];
        /** @type {?} */
        var loc = {};
        /** @type {?} */
        var X = [];
        /** @type {?} */
        var Y = [];
        // Point x,y
        /** @type {?} */
        var points = _code.points;
        for (var j = 0; j < points.length; j++) {
            /** @type {?} */
            var xj = HAS_OWN_PROPERTY(points, j + ".x") ? points[j].x : 0;
            /** @type {?} */
            var yj = HAS_OWN_PROPERTY(points, j + ".y") ? points[j].y : 0;
            loc["x" + (j + 1)] = xj;
            loc["y" + (j + 1)] = yj;
            X.push(xj);
            Y.push(yj);
        }
        // Min max
        /** @type {?} */
        var minX = Math.min.apply(Math, tslib_1.__spread(X));
        /** @type {?} */
        var minY = Math.min.apply(Math, tslib_1.__spread(Y));
        // Style for canvas
        ctx.lineWidth = 1;
        ctx.strokeStyle = 'green';
        ctx.fillStyle = "#55f02880";
        ctx.font = "15px serif";
        FILL_TEXT_MULTI_LINE(ctx, _code.value, minX, minY - 5);
        // polygon [x,y, x,y, x,y.....];
        /** @type {?} */
        var polygon = [];
        for (var k = 0; k < X.length; k++) {
            polygon.push(loc["x" + (k + 1)]);
            polygon.push(loc["y" + (k + 1)]);
        }
        // Copy array
        /** @type {?} */
        var shape = (/** @type {?} */ (polygon.slice(0)));
        // Draw polygon
        ctx.beginPath();
        ctx.moveTo(shape.shift(), shape.shift());
        while (shape.length) {
            ctx.lineTo(shape.shift(), shape.shift()); //x,y
        }
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
    }
    ;
})
/**
 * READ_AS_DATA_URL
 * @param file
 * @param config
 * @return Promise
 */
;
/**
 * READ_AS_DATA_URL
 * \@param file
 * \@param config
 * \@return Promise
 * @type {?}
 */
export var READ_AS_DATA_URL = (/**
 * @param {?} file
 * @param {?} config
 * @return {?}
 */
function (file, config) {
    /**
     * overrides *
     * @type {?}
     */
    var decode = HAS_OWN_PROPERTY(config, 'decode') ? config.decode : CONFIG_DEFAULT.decode;
    /** drawImage **/
    return new Promise((/**
     * @param {?} resolve
     * @param {?} reject
     * @return {?}
     */
    function (resolve, reject) {
        /** @type {?} */
        var fileReader = new FileReader();
        fileReader.onload = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var objectFile = {
                name: file.name,
                file: file,
                url: URL.createObjectURL(file)
            };
            // Set the src of this Image object.
            /** @type {?} */
            var image = new Image();
            // Setting cross origin value to anonymous
            image.setAttribute('crossOrigin', 'anonymous');
            // When our image has loaded.
            image.onload = (/**
             * @return {?}
             */
            function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
                var canvas, ctx, imageData, code, blob, url, blobToFile;
                return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            // Get the canvas element by using the getElementById method.
                            canvas = document.createElement('canvas');
                            // HTMLImageElement size
                            canvas.width = image.naturalWidth || image.width;
                            canvas.height = image.naturalHeight || image.height;
                            // Get a 2D drawing context for the canvas.
                            ctx = (/** @type {?} */ (canvas.getContext('2d')));
                            // Draw image
                            ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                            // Data image
                            imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                            // Scanner
                            return [4 /*yield*/, zbarWasm.scanImageData(imageData)];
                        case 1:
                            code = _a.sent();
                            if (!(code && code.length)) return [3 /*break*/, 3];
                            // Decode
                            code.forEach((/**
                             * @param {?} s
                             * @return {?}
                             */
                            function (s) { return s.value = s.decode(decode && decode.toLocaleLowerCase()); }));
                            // Overlay
                            DRAW_RESULT_ON_CANVAS(code, canvas);
                            // Emit object
                            return [4 /*yield*/, CANVAS_TO_BLOB(canvas)];
                        case 2:
                            blob = _a.sent();
                            url = URL.createObjectURL(blob);
                            blobToFile = (/**
                             * @param {?} theBlob
                             * @param {?} fileName
                             * @return {?}
                             */
                            function (theBlob, fileName) { return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type }); });
                            resolve(Object.assign({}, objectFile, { data: code, url: url, canvas: canvas, file: blobToFile(blob, objectFile.name) }));
                            return [3 /*break*/, 4];
                        case 3:
                            resolve(Object.assign({}, objectFile, { data: code, canvas: canvas }));
                            _a.label = 4;
                        case 4: return [2 /*return*/];
                    }
                });
            }); });
            // Set src
            image.src = objectFile.url;
        });
        fileReader.onerror = (/**
         * @param {?} error
         * @return {?}
         */
        function (error) { return reject(error); });
        fileReader.readAsDataURL(file);
    }));
})
/**
 * Convert canvas to blob
 * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality
 * @param canvas
 * @param type
 * @return Promise
 */
;
/**
 * Convert canvas to blob
 * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality
 * \@param canvas
 * \@param type
 * \@return Promise
 * @type {?}
 */
export var CANVAS_TO_BLOB = (/**
 * @param {?} canvas
 * @param {?=} type
 * @return {?}
 */
function (canvas, type) {
    return new Promise((/**
     * @param {?} resolve
     * @param {?} reject
     * @return {?}
     */
    function (resolve, reject) { return canvas.toBlob((/**
     * @param {?} blob
     * @return {?}
     */
    function (blob) { return resolve(blob); }), type); }));
})
/**
 * Convert blob to file
 * @param theBlob
 * @param fileName
 * @return File
 */
;
/**
 * Convert blob to file
 * \@param theBlob
 * \@param fileName
 * \@return File
 * @type {?}
 */
export var BLOB_TO_FILE = (/**
 * @param {?} theBlob
 * @param {?} fileName
 * @return {?}
 */
function (theBlob, fileName) {
    return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });
})
/**
 * FILES_TO_SCAN
 * @param files
 * @return AsyncSubject
 */
;
/**
 * FILES_TO_SCAN
 * \@param files
 * \@return AsyncSubject
 * @type {?}
 */
export var FILES_TO_SCAN = (/**
 * @param {?=} files
 * @param {?=} configs
 * @param {?=} as
 * @return {?}
 */
function (files, configs, as) {
    if (files === void 0) { files = []; }
    if (as === void 0) { as = new AsyncSubject(); }
    Promise.all(Object.assign([], files).map((/**
     * @param {?} m
     * @return {?}
     */
    function (m) { return READ_AS_DATA_URL(m, configs); }))).then((/**
     * @param {?} img
     * @return {?}
     */
    function (img) { return AS_COMPLETE(as, img); })).catch((/**
     * @param {?} error
     * @return {?}
     */
    function (error) { return AS_COMPLETE(as, null, error); }));
    return as;
})
/**
 * FILL_TEXT_MULTI_LINE
 * @param ctx
 * @param text
 * @param x
 * @param y
 */
;
/**
 * FILL_TEXT_MULTI_LINE
 * \@param ctx
 * \@param text
 * \@param x
 * \@param y
 * @type {?}
 */
export var FILL_TEXT_MULTI_LINE = (/**
 * @param {?} ctx
 * @param {?} text
 * @param {?} x
 * @param {?} y
 * @return {?}
 */
function (ctx, text, x, y) {
    /** @type {?} */
    var lineHeight = ctx.measureText("M").width * 1.2;
    /** @type {?} */
    var lines = text.split("\n");
    for (var i = 0; i < lines.length; ++i) {
        ctx.fillText(lines[i], x, y);
        ctx.strokeText(lines[i], x, y);
        y += lineHeight;
    }
})
/**
 * VIBRATE
 * Bật rung trên mobile
 * @param time
 */
;
/**
 * VIBRATE
 * Bật rung trên mobile
 * \@param time
 * @type {?}
 */
export var VIBRATE = (/**
 * @param {?} time
 * @return {?}
 */
function (time) {
    time && IS_MOBILE() && window.navigator.vibrate(time);
});
/**
 * IS_MOBILE
 * \@return
 * @type {?}
 */
export var IS_MOBILE = (/**
 * @return {?}
 */
function () {
    /** @type {?} */
    var vendor = navigator.userAgent || navigator['vendor'] || window['opera'];
    return !!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(vendor) ||
        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(vendor.substr(0, 4)));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNjYW5uZXItcXJjb2RlLmhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1zY2FubmVyLXFyY29kZS8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtc2Nhbm5lci1xcmNvZGUuaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGlCQTRZRTs7Ozs7O0FBNVlGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDcEMsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDhCQUE4QixDQUFDOzs7Ozs7Ozs7QUFXOUQsTUFBTSxLQUFPLFNBQVM7Ozs7OztBQUFHLFVBQUMsV0FBbUIsRUFBRSxNQUFXLEVBQUUsYUFBa0I7O0lBQzVFLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFO1FBQ3JELEtBQUssSUFBTSxHQUFHLElBQUksYUFBYSxFQUFFOztnQkFDekIsU0FBUyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsc0JBQU0sTUFBTSxDQUFDLFdBQVcsQ0FBQyxZQUFPLEdBQUMsR0FBRyxJQUFHLENBQUMsbUJBQUEsYUFBYSxFQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBSyxDQUFDO1lBQ25ILE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztTQUNqRztRQUNELE9BQU8sTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQzVCO1NBQU07UUFDTCxPQUFPLGFBQWEsQ0FBQztLQUN0QjtBQUNILENBQUMsQ0FBQTs7Ozs7Ozs7QUFRRCxNQUFNLEtBQU8sV0FBVzs7Ozs7O0FBQUcsVUFBQyxFQUFxQixFQUFFLElBQVMsRUFBRSxLQUFZO0lB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LFFBQVEsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDNUUsT0FBTyxDQUFDLENBQUMsQ0FDUCxxVkFBcVYsQ0FBQyxJQUFJLENBQ3hWLE1BQU0sQ0FDUDtRQUNELDJoREFBMmhELENBQUMsSUFBSSxDQUM5aEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQ3BCLENBQ0YsQ0FBQztBQUNKLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jU3ViamVjdCB9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7IENPTkZJR19ERUZBVUxUIH0gZnJvbSBcIi4vbmd4LXNjYW5uZXItcXJjb2RlLmRlZmF1bHRcIjtcclxuaW1wb3J0IHsgU2Nhbm5lclFSQ29kZUNvbmZpZywgU2Nhbm5lclFSQ29kZVNlbGVjdGVkRmlsZXMgfSBmcm9tIFwiLi9uZ3gtc2Nhbm5lci1xcmNvZGUub3B0aW9uc1wiO1xyXG5kZWNsYXJlIGNvbnN0IHpiYXJXYXNtOiBhbnk7XHJcblxyXG4vKipcclxuICogT1ZFUlJJREVTXHJcbiAqIEBwYXJhbSB2YXJpYWJsZUtleSBcclxuICogQHBhcmFtIGNvbmZpZyBcclxuICogQHBhcmFtIGRlZmF1bHRDb25maWcgXHJcbiAqIEByZXR1cm5zIFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IE9WRVJSSURFUyA9ICh2YXJpYWJsZUtleTogc3RyaW5nLCBjb25maWc6IGFueSwgZGVmYXVsdENvbmZpZzogYW55KSA9PiB7XHJcbiAgaWYgKGNvbmZpZyAmJiBPYmplY3Qua2V5cyhjb25maWdbdmFyaWFibGVLZXldKS5sZW5ndGgpIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGRlZmF1bHRDb25maWcpIHtcclxuICAgICAgY29uc3QgY2xvbmVEZWVwID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7IC4uLmNvbmZpZ1t2YXJpYWJsZUtleV0sIC4uLnsgW2tleV06IChkZWZhdWx0Q29uZmlnIGFzIGFueSlba2V5XSB9IH0pKTtcclxuICAgICAgY29uZmlnW3ZhcmlhYmxlS2V5XSA9IGNvbmZpZ1t2YXJpYWJsZUtleV0uaGFzT3duUHJvcGVydHkoa2V5KSA/IGNvbmZpZ1t2YXJpYWJsZUtleV0gOiBjbG9uZURlZXA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29uZmlnW3ZhcmlhYmxlS2V5XTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGRlZmF1bHRDb25maWc7XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJ4anMgY29tcGxldGVcclxuICogQHBhcmFtIGFzXHJcbiAqIEBwYXJhbSBkYXRhXHJcbiAqIEBwYXJhbSBlcnJvclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEFTX0NPTVBMRVRFID0gKGFzOiBBc3luY1N1YmplY3Q8YW55PiwgZGF0YTogYW55LCBlcnJvciA9IG51bGwpID0+IHtcclxuICBlcnJvciA/IGFzLmVycm9yKGVycm9yKSA6IGFzLm5leHQoZGF0YSk7XHJcbiAgYXMuY29tcGxldGUoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDQU1FUkFfQkVFUFxyXG4gKiBAcGFyYW0gaXNQbGF5IFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmV4cG9ydCBjb25zdCBQTEFZX0FVRElPID0gKGlzUGxheTogYm9vbGVhbiA9IGZhbHNlKSA9PiB7XHJcbiAgaWYgKGlzUGxheSA9PT0gZmFsc2UpIHJldHVybjtcclxuICBjb25zdCBhdWRpbyA9IG5ldyBBdWRpbygnZGF0YTphdWRpby93YXY7YmFzZTY0LFVrbEdSbDl2VDE5WFFWWkZabTEwSUJBQUFBQUJBQUVBUUI4QUFFQWZBQUFCQUFnQVpHRjBZVScgKyBBcnJheSgzMDApLmpvaW4oJzEwMScpKTtcclxuICAvLyB3aGVuIHRoZSBzb3VuZCBoYXMgYmVlbiBsb2FkZWQsIGV4ZWN1dGUgeW91ciBjb2RlXHJcbiAgYXVkaW8ub25jYW5wbGF5dGhyb3VnaCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHByb21pc2UgPSBhdWRpby5wbGF5KCk7XHJcbiAgICBpZiAocHJvbWlzZSkge1xyXG4gICAgICBwcm9taXNlLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gXCJOb3RBbGxvd2VkRXJyb3JcIiB8fCBlLm5hbWUgPT09IFwiTm90U3VwcG9ydGVkRXJyb3JcIikge1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coZS5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogSEFTX09XTl9QUk9QRVJUWVxyXG4gKiBGaXggaXNzdWUgdnMgbmcgdiA2LTctOFxyXG4gKiBPcHRpb25hbCBjaGFpbmluZyAoPy4pIGp1c3QgaGF2ZSBvbiBuZyB2IDkrK1xyXG4gKiBlZzogSEFTX09XTl9QUk9QRVJUWShjb25maWcsICdmcmFtZU9wdGlvbnMuc3R5bGUnKSAvLyBvdXRwdXQ6IGJvb2xlYW5cclxuICogQHBhcmFtIG9iaiBcclxuICogQHBhcmFtIHByb3BlcnR5UGF0aCBcclxuICogQHJldHVybnMgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgSEFTX09XTl9QUk9QRVJUWSA9IChvYmo6IGFueSwgcHJvcGVydHlQYXRoOiBzdHJpbmcpID0+IHtcclxuICBjb25zdCBwcm9wZXJ0aWVzID0gcHJvcGVydHlQYXRoLnNwbGl0KFwiLlwiKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCBwcm9wID0gcHJvcGVydGllc1tpXTtcclxuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9iaiA9IG9ialtwcm9wXTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG4vKipcclxuICogRFJBV19SRVNVTFRfQVBQRU5EX0NISUxEXHJcbiAqIEBwYXJhbSBjb2RlIFxyXG4gKiBAcGFyYW0gb3JpQ2FudmFzIFxyXG4gKiBAcGFyYW0gZWxUYXJnZXQgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgRFJBV19SRVNVTFRfQVBQRU5EX0NISUxEID0gKGNvZGU6IGFueVtdLCBvcmlDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBlbFRhcmdldDogSFRNTENhbnZhc0VsZW1lbnQgfCBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG4gIGxldCB3aWR0aFpvb207XHJcbiAgbGV0IGhlaWdodFpvb207XHJcbiAgbGV0IG9yaVdpZHRoID0gb3JpQ2FudmFzLndpZHRoO1xyXG4gIGxldCBvcmlIZWlnaHQgPSBvcmlDYW52YXMuaGVpZ2h0O1xyXG4gIGxldCBvcmlXSFJhdGlvID0gb3JpV2lkdGggLyBvcmlIZWlnaHQ7XHJcbiAgbGV0IGltZ1dpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShvcmlDYW52YXMpLndpZHRoKTtcclxuICBsZXQgaW1nSGVpZ2h0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShvcmlDYW52YXMpLmhlaWdodCk7XHJcbiAgbGV0IGltZ1dIUmF0aW8gPSBpbWdXaWR0aCAvIGltZ0hlaWdodDtcclxuICBlbFRhcmdldC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgaWYgKG9yaVdIUmF0aW8gPiBpbWdXSFJhdGlvKSB7XHJcbiAgICB3aWR0aFpvb20gPSBpbWdXaWR0aCAvIG9yaVdpZHRoO1xyXG4gICAgaGVpZ2h0Wm9vbSA9IGltZ1dpZHRoIC8gb3JpV0hSYXRpbyAvIG9yaUhlaWdodDtcclxuICB9IGVsc2Uge1xyXG4gICAgaGVpZ2h0Wm9vbSA9IGltZ0hlaWdodCAvIG9yaUhlaWdodDtcclxuICAgIHdpZHRoWm9vbSA9IChpbWdIZWlnaHQgKiBvcmlXSFJhdGlvKSAvIG9yaVdpZHRoO1xyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBfY29kZSA9IGNvZGVbaV07XHJcbiAgICAvLyBOZXcgY2FudmFzXHJcbiAgICBsZXQgY3ZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgIGxldCBjdHggPSBjdnMuZ2V0Q29udGV4dCgnMmQnLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBsZXQgbG9jOiBhbnkgPSB7fTtcclxuICAgIGxldCBYOiBhbnkgPSBbXTtcclxuICAgIGxldCBZOiBhbnkgPSBbXTtcclxuXHJcbiAgICAvLyBQb2ludCB4LHlcclxuICAgIGNvbnN0IHBvaW50cyA9IF9jb2RlLnBvaW50cztcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGNvbnN0IHhqID0gSEFTX09XTl9QUk9QRVJUWShwb2ludHMsIGAke2p9LnhgKSA/IHBvaW50c1tqXS54IDogMDtcclxuICAgICAgY29uc3QgeWogPSBIQVNfT1dOX1BST1BFUlRZKHBvaW50cywgYCR7an0ueWApID8gcG9pbnRzW2pdLnkgOiAwO1xyXG4gICAgICBsb2NbYHgke2ogKyAxfWBdID0geGo7XHJcbiAgICAgIGxvY1tgeSR7aiArIDF9YF0gPSB5ajtcclxuICAgICAgWC5wdXNoKHhqKTtcclxuICAgICAgWS5wdXNoKHlqKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNaW4gbWF4XHJcbiAgICBsZXQgbWF4WCA9IE1hdGgubWF4KC4uLlgpO1xyXG4gICAgbGV0IG1pblggPSBNYXRoLm1pbiguLi5YKTtcclxuICAgIGxldCBtYXhZID0gTWF0aC5tYXgoLi4uWSk7XHJcbiAgICBsZXQgbWluWSA9IE1hdGgubWluKC4uLlkpO1xyXG5cclxuICAgIC8vIEFkZCBjbGFzc1xyXG4gICAgY3ZzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncXJjb2RlLXBvbHlnb24nKTtcclxuXHJcbiAgICAvLyBTaXplIHdpdGggc2NyZWVuIHpvb21cclxuICAgIGlmIChvcmlXSFJhdGlvID4gaW1nV0hSYXRpbykge1xyXG4gICAgICBjdnMuc3R5bGUudG9wID0gbWluWSAqIGhlaWdodFpvb20gKyAoaW1nSGVpZ2h0IC0gaW1nV2lkdGggLyBvcmlXSFJhdGlvKSAqIDAuNSArIFwicHhcIjtcclxuICAgICAgY3ZzLnN0eWxlLmxlZnQgPSBtaW5YICogd2lkdGhab29tICsgXCJweFwiO1xyXG4gICAgICBjdnMud2lkdGggPSAobWF4WCAtIG1pblgpICogd2lkdGhab29tO1xyXG4gICAgICBjdnMuaGVpZ2h0ID0gKG1heFkgLSBtaW5ZKSAqIHdpZHRoWm9vbTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN2cy5zdHlsZS50b3AgPSBtaW5ZICogaGVpZ2h0Wm9vbSArIFwicHhcIjtcclxuICAgICAgY3ZzLnN0eWxlLmxlZnQgPSBtaW5YICogd2lkdGhab29tICsgKGltZ1dpZHRoIC0gaW1nSGVpZ2h0ICogb3JpV0hSYXRpbykgKiAwLjUgKyBcInB4XCI7XHJcbiAgICAgIGN2cy53aWR0aCA9IChtYXhYIC0gbWluWCkgKiBoZWlnaHRab29tO1xyXG4gICAgICBjdnMuaGVpZ2h0ID0gKG1heFkgLSBtaW5ZKSAqIGhlaWdodFpvb207XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3R5bGUgZm9yIGNhbnZhc1xyXG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnZ3JlZW4nO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiIzU1ZjAyODgwXCI7XHJcblxyXG4gICAgLy8gcG9seWdvbiBbeCx5LCB4LHksIHgseS4uLi4uXTtcclxuICAgIGNvbnN0IHBvbHlnb24gPSBbXTtcclxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgWC5sZW5ndGg7IGsrKykge1xyXG4gICAgICBwb2x5Z29uLnB1c2goKGxvY1tgeCR7ayArIDF9YF0gLSBtaW5YKSAqIGhlaWdodFpvb20pO1xyXG4gICAgICBwb2x5Z29uLnB1c2goKGxvY1tgeSR7ayArIDF9YF0gLSBtaW5ZKSAqIHdpZHRoWm9vbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ29weSBhcnJheVxyXG4gICAgY29uc3Qgc2hhcGUgPSBwb2x5Z29uLnNsaWNlKDApIGFzIGFueTtcclxuXHJcbiAgICAvLyBEcmF3IHBvbHlnb25cclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5tb3ZlVG8oc2hhcGUuc2hpZnQoKSwgc2hhcGUuc2hpZnQoKSk7XHJcbiAgICB3aGlsZSAoc2hhcGUubGVuZ3RoKSB7XHJcbiAgICAgIGN0eC5saW5lVG8oc2hhcGUuc2hpZnQoKSwgc2hhcGUuc2hpZnQoKSk7IC8veCx5XHJcbiAgICB9XHJcbiAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgY3R4LnN0cm9rZSgpO1xyXG5cclxuICAgIC8vIFRvb2x0aXAgcmVzdWx0XHJcbiAgICBjb25zdCBxcmNvZGVUb29sdGlwVGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcXJjb2RlVG9vbHRpcFRlbXAuc2V0QXR0cmlidXRlKCdjbGFzcycsICdxcmNvZGUtdG9vbHRpcC10ZW1wJyk7XHJcbiAgICBxcmNvZGVUb29sdGlwVGVtcC5pbm5lclRleHQgPSBfY29kZS52YWx1ZTtcclxuXHJcbiAgICAvLyBUb29sdGlwIGJveFxyXG4gICAgY29uc3QgcXJjb2RlVG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgcXJjb2RlVG9vbHRpcC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3FyY29kZS10b29sdGlwJyk7XHJcbiAgICBxcmNvZGVUb29sdGlwLmFwcGVuZENoaWxkKHFyY29kZVRvb2x0aXBUZW1wKTtcclxuICAgIGhlaWdodFpvb20gPSBpbWdIZWlnaHQgLyBvcmlIZWlnaHQ7XHJcbiAgICB3aWR0aFpvb20gPSAoaW1nSGVpZ2h0ICogb3JpV0hSYXRpbykgLyBvcmlXaWR0aDtcclxuICAgIHFyY29kZVRvb2x0aXAuc3R5bGUuZm9udFNpemUgPSB3aWR0aFpvb20gKiAxNSArICdweCc7XHJcbiAgICBxcmNvZGVUb29sdGlwLnN0eWxlLnRvcCA9IG1pblkgKiBoZWlnaHRab29tICsgXCJweFwiO1xyXG4gICAgcXJjb2RlVG9vbHRpcC5zdHlsZS5sZWZ0ID0gbWluWCAqIHdpZHRoWm9vbSArIChpbWdXaWR0aCAtIGltZ0hlaWdodCAqIG9yaVdIUmF0aW8pICogMC41ICsgXCJweFwiO1xyXG4gICAgcXJjb2RlVG9vbHRpcC5zdHlsZS53aWR0aCA9IChtYXhYIC0gbWluWCkgKiBoZWlnaHRab29tICsgXCJweFwiO1xyXG4gICAgcXJjb2RlVG9vbHRpcC5zdHlsZS5oZWlnaHQgPSAobWF4WSAtIG1pblkpICogaGVpZ2h0Wm9vbSArIFwicHhcIjtcclxuXHJcbiAgICAvLyBSZXN1bHQgdGV4dFxyXG4gICAgY29uc3QgcmVzdWx0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgIHJlc3VsdFRleHQuaW5uZXJUZXh0ID0gX2NvZGUudmFsdWU7XHJcbiAgICByZXN1bHRUZXh0LnN0eWxlLmZvbnRTaXplID0gd2lkdGhab29tICogMTMgKyAncHgnO1xyXG5cclxuICAgIC8vIFNldCBwb3NpdGlvbiByZXN1bHQgdGV4dFxyXG4gICAgcmVzdWx0VGV4dC5zdHlsZS50b3AgPSBtaW5ZICogaGVpZ2h0Wm9vbSArICgtMjAgKiBoZWlnaHRab29tKSArIFwicHhcIjtcclxuICAgIHJlc3VsdFRleHQuc3R5bGUubGVmdCA9IG1pblggKiB3aWR0aFpvb20gKyAoaW1nV2lkdGggLSBpbWdIZWlnaHQgKiBvcmlXSFJhdGlvKSAqIDAuNSArIFwicHhcIjtcclxuXHJcbiAgICBpZiAoZWxUYXJnZXQpIHtcclxuICAgICAgZWxUYXJnZXQuYXBwZW5kQ2hpbGQocXJjb2RlVG9vbHRpcCk7XHJcbiAgICAgIGVsVGFyZ2V0LmFwcGVuZENoaWxkKHJlc3VsdFRleHQpO1xyXG4gICAgICBlbFRhcmdldC5hcHBlbmRDaGlsZChjdnMpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG59XHJcblxyXG4vKipcclxuICogRFJBV19SRVNVTFRfT05fQ0FOVkFTXHJcbiAqIEBwYXJhbSBjb2RlIFxyXG4gKiBAcGFyYW0gY3ZzIFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERSQVdfUkVTVUxUX09OX0NBTlZBUyA9IChjb2RlOiBhbnlbXSwgY3ZzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4ge1xyXG4gIGxldCBjdHggPSBjdnMuZ2V0Q29udGV4dCgnMmQnLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZS5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgX2NvZGUgPSBjb2RlW2ldO1xyXG4gICAgbGV0IGxvYzogYW55ID0ge307XHJcbiAgICBsZXQgWDogYW55ID0gW107XHJcbiAgICBsZXQgWTogYW55ID0gW107XHJcblxyXG4gICAgLy8gUG9pbnQgeCx5XHJcbiAgICBjb25zdCBwb2ludHMgPSBfY29kZS5wb2ludHM7XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBvaW50cy5sZW5ndGg7IGorKykge1xyXG4gICAgICBjb25zdCB4aiA9IEhBU19PV05fUFJPUEVSVFkocG9pbnRzLCBgJHtqfS54YCkgPyBwb2ludHNbal0ueCA6IDA7XHJcbiAgICAgIGNvbnN0IHlqID0gSEFTX09XTl9QUk9QRVJUWShwb2ludHMsIGAke2p9LnlgKSA/IHBvaW50c1tqXS55IDogMDtcclxuICAgICAgbG9jW2B4JHtqICsgMX1gXSA9IHhqO1xyXG4gICAgICBsb2NbYHkke2ogKyAxfWBdID0geWo7XHJcbiAgICAgIFgucHVzaCh4aik7XHJcbiAgICAgIFkucHVzaCh5aik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWluIG1heFxyXG4gICAgbGV0IG1pblggPSBNYXRoLm1pbiguLi5YKTtcclxuICAgIGxldCBtaW5ZID0gTWF0aC5taW4oLi4uWSk7XHJcblxyXG4gICAgLy8gU3R5bGUgZm9yIGNhbnZhc1xyXG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnZ3JlZW4nO1xyXG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiIzU1ZjAyODgwXCI7XHJcbiAgICBjdHguZm9udCA9IFwiMTVweCBzZXJpZlwiO1xyXG4gICAgRklMTF9URVhUX01VTFRJX0xJTkUoY3R4LCBfY29kZS52YWx1ZSwgbWluWCwgbWluWSAtIDUpXHJcblxyXG4gICAgLy8gcG9seWdvbiBbeCx5LCB4LHksIHgseS4uLi4uXTtcclxuICAgIGNvbnN0IHBvbHlnb24gPSBbXTtcclxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgWC5sZW5ndGg7IGsrKykge1xyXG4gICAgICBwb2x5Z29uLnB1c2gobG9jW2B4JHtrICsgMX1gXSk7XHJcbiAgICAgIHBvbHlnb24ucHVzaChsb2NbYHkke2sgKyAxfWBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb3B5IGFycmF5XHJcbiAgICBjb25zdCBzaGFwZSA9IHBvbHlnb24uc2xpY2UoMCkgYXMgYW55O1xyXG5cclxuICAgIC8vIERyYXcgcG9seWdvblxyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyhzaGFwZS5zaGlmdCgpLCBzaGFwZS5zaGlmdCgpKTtcclxuICAgIHdoaWxlIChzaGFwZS5sZW5ndGgpIHtcclxuICAgICAgY3R4LmxpbmVUbyhzaGFwZS5zaGlmdCgpLCBzaGFwZS5zaGlmdCgpKTsgLy94LHlcclxuICAgIH1cclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJFQURfQVNfREFUQV9VUkxcclxuICogQHBhcmFtIGZpbGUgXHJcbiAqIEBwYXJhbSBjb25maWcgXHJcbiAqIEByZXR1cm4gUHJvbWlzZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFJFQURfQVNfREFUQV9VUkwgPSAoZmlsZTogRmlsZSwgY29uZmlnOiBTY2FubmVyUVJDb2RlQ29uZmlnKTogUHJvbWlzZTxTY2FubmVyUVJDb2RlU2VsZWN0ZWRGaWxlcz4gPT4ge1xyXG4gIC8qKiBvdmVycmlkZXMgKiovXHJcbiAgbGV0IGRlY29kZSA9IEhBU19PV05fUFJPUEVSVFkoY29uZmlnLCAnZGVjb2RlJykgPyBjb25maWcuZGVjb2RlIDogQ09ORklHX0RFRkFVTFQuZGVjb2RlO1xyXG5cclxuICAvKiogZHJhd0ltYWdlICoqL1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICBjb25zdCBvYmplY3RGaWxlID0ge1xyXG4gICAgICAgIG5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICBmaWxlOiBmaWxlLFxyXG4gICAgICAgIHVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKVxyXG4gICAgICB9O1xyXG4gICAgICAvLyBTZXQgdGhlIHNyYyBvZiB0aGlzIEltYWdlIG9iamVjdC5cclxuICAgICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgLy8gU2V0dGluZyBjcm9zcyBvcmlnaW4gdmFsdWUgdG8gYW5vbnltb3VzXHJcbiAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnY3Jvc3NPcmlnaW4nLCAnYW5vbnltb3VzJyk7XHJcbiAgICAgIC8vIFdoZW4gb3VyIGltYWdlIGhhcyBsb2FkZWQuXHJcbiAgICAgIGltYWdlLm9ubG9hZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAvLyBHZXQgdGhlIGNhbnZhcyBlbGVtZW50IGJ5IHVzaW5nIHRoZSBnZXRFbGVtZW50QnlJZCBtZXRob2QuXHJcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgLy8gSFRNTEltYWdlRWxlbWVudCBzaXplXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2UubmF0dXJhbFdpZHRoIHx8IGltYWdlLndpZHRoO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5uYXR1cmFsSGVpZ2h0IHx8IGltYWdlLmhlaWdodDtcclxuICAgICAgICAvLyBHZXQgYSAyRCBkcmF3aW5nIGNvbnRleHQgZm9yIHRoZSBjYW52YXMuXHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykgYXMgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgICAgIC8vIERyYXcgaW1hZ2VcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIC8vIERhdGEgaW1hZ2VcclxuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gU2Nhbm5lclxyXG4gICAgICAgIGNvbnN0IGNvZGUgPSBhd2FpdCB6YmFyV2FzbS5zY2FuSW1hZ2VEYXRhKGltYWdlRGF0YSk7XHJcbiAgICAgICAgaWYgKGNvZGUgJiYgY29kZS5sZW5ndGgpIHtcclxuICAgICAgICAgIC8vIERlY29kZVxyXG4gICAgICAgICAgY29kZS5mb3JFYWNoKChzOiBhbnkpID0+IHMudmFsdWUgPSBzLmRlY29kZShkZWNvZGUgJiYgZGVjb2RlLnRvTG9jYWxlTG93ZXJDYXNlKCkpKTtcclxuXHJcbiAgICAgICAgICAvLyBPdmVybGF5XHJcbiAgICAgICAgICBEUkFXX1JFU1VMVF9PTl9DQU5WQVMoY29kZSwgY2FudmFzKTtcclxuXHJcbiAgICAgICAgICAvLyBFbWl0IG9iamVjdFxyXG4gICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IENBTlZBU19UT19CTE9CKGNhbnZhcyk7XHJcbiAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgICAgY29uc3QgYmxvYlRvRmlsZSA9ICh0aGVCbG9iOiBhbnksIGZpbGVOYW1lOiBzdHJpbmcpID0+IG5ldyBGaWxlKFt0aGVCbG9iXSwgZmlsZU5hbWUsIHsgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgdHlwZTogdGhlQmxvYi50eXBlIH0pO1xyXG4gICAgICAgICAgcmVzb2x2ZShPYmplY3QuYXNzaWduKHt9LCBvYmplY3RGaWxlLCB7IGRhdGE6IGNvZGUsIHVybDogdXJsLCBjYW52YXM6IGNhbnZhcywgZmlsZTogYmxvYlRvRmlsZShibG9iLCBvYmplY3RGaWxlLm5hbWUpIH0pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzb2x2ZShPYmplY3QuYXNzaWduKHt9LCBvYmplY3RGaWxlLCB7IGRhdGE6IGNvZGUsIGNhbnZhczogY2FudmFzIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIC8vIFNldCBzcmNcclxuICAgICAgaW1hZ2Uuc3JjID0gb2JqZWN0RmlsZS51cmw7XHJcbiAgICB9XHJcbiAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSAoZXJyb3I6IGFueSkgPT4gcmVqZWN0KGVycm9yKTtcclxuICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBjYW52YXMgdG8gYmxvYlxyXG4gKiBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7IC4uIH0sICdpbWFnZS9qcGVnJywgMC45NSk7IC8vIEpQRUcgYXQgOTUlIHF1YWxpdHlcclxuICogQHBhcmFtIGNhbnZhcyBcclxuICogQHBhcmFtIHR5cGUgXHJcbiAqIEByZXR1cm4gUHJvbWlzZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IENBTlZBU19UT19CTE9CID0gKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHR5cGU/OiBzdHJpbmcpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBjYW52YXMudG9CbG9iKGJsb2IgPT4gcmVzb2x2ZShibG9iKSwgdHlwZSkpO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBibG9iIHRvIGZpbGVcclxuICogQHBhcmFtIHRoZUJsb2IgXHJcbiAqIEBwYXJhbSBmaWxlTmFtZSBcclxuICogQHJldHVybiBGaWxlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQkxPQl9UT19GSUxFID0gKHRoZUJsb2I6IGFueSwgZmlsZU5hbWU6IHN0cmluZyk6IEZpbGUgPT4ge1xyXG4gIHJldHVybiBuZXcgRmlsZShbdGhlQmxvYl0sIGZpbGVOYW1lLCB7IGxhc3RNb2RpZmllZDogbmV3IERhdGUoKS5nZXRUaW1lKCksIHR5cGU6IHRoZUJsb2IudHlwZSB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZJTEVTX1RPX1NDQU5cclxuICogQHBhcmFtIGZpbGVzIFxyXG4gKiBAcmV0dXJuIEFzeW5jU3ViamVjdFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZJTEVTX1RPX1NDQU4gPSAoZmlsZXM6IEZpbGVbXSA9IFtdLCBjb25maWdzOiBTY2FubmVyUVJDb2RlQ29uZmlnLCBhcyA9IG5ldyBBc3luY1N1YmplY3Q8U2Nhbm5lclFSQ29kZVNlbGVjdGVkRmlsZXNbXT4oKSk6IEFzeW5jU3ViamVjdDxTY2FubmVyUVJDb2RlU2VsZWN0ZWRGaWxlc1tdPiA9PiB7XHJcbiAgUHJvbWlzZS5hbGwoT2JqZWN0LmFzc2lnbihbXSwgZmlsZXMpLm1hcChtID0+IFJFQURfQVNfREFUQV9VUkwobSwgY29uZmlncykpKS50aGVuKChpbWc6IFNjYW5uZXJRUkNvZGVTZWxlY3RlZEZpbGVzW10pID0+IEFTX0NPTVBMRVRFKGFzLCBpbWcpKS5jYXRjaCgoZXJyb3I6IGFueSkgPT4gQVNfQ09NUExFVEUoYXMsIG51bGwsIGVycm9yKSk7XHJcbiAgcmV0dXJuIGFzO1xyXG59XHJcblxyXG4vKipcclxuICogRklMTF9URVhUX01VTFRJX0xJTkVcclxuICogQHBhcmFtIGN0eCBcclxuICogQHBhcmFtIHRleHQgXHJcbiAqIEBwYXJhbSB4IFxyXG4gKiBAcGFyYW0geSBcclxuICovXHJcbmV4cG9ydCBjb25zdCBGSUxMX1RFWFRfTVVMVElfTElORSA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgdGV4dDogc3RyaW5nLCB4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gIGxldCBsaW5lSGVpZ2h0ID0gY3R4Lm1lYXN1cmVUZXh0KFwiTVwiKS53aWR0aCAqIDEuMjtcclxuICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGN0eC5maWxsVGV4dChsaW5lc1tpXSwgeCwgeSk7XHJcbiAgICBjdHguc3Ryb2tlVGV4dChsaW5lc1tpXSwgeCwgeSk7XHJcbiAgICB5ICs9IGxpbmVIZWlnaHQ7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVklCUkFURVxyXG4gKiBC4bqtdCBydW5nIHRyw6puIG1vYmlsZVxyXG4gKiBAcGFyYW0gdGltZSBcclxuICovXHJcbmV4cG9ydCBjb25zdCBWSUJSQVRFID0gKHRpbWU6IG51bWJlcikgPT4ge1xyXG4gIHRpbWUgJiYgSVNfTU9CSUxFKCkgJiYgd2luZG93Lm5hdmlnYXRvci52aWJyYXRlKHRpbWUpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIElTX01PQklMRVxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmV4cG9ydCBjb25zdCBJU19NT0JJTEUgPSAoKSA9PiB7XHJcbiAgY29uc3QgdmVuZG9yID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3JbJ3ZlbmRvciddIHx8IHdpbmRvd1snb3BlcmEnXTtcclxuICByZXR1cm4gISEoXHJcbiAgICAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vfGFuZHJvaWR8aXBhZHxwbGF5Ym9va3xzaWxrL2kudGVzdChcclxuICAgICAgdmVuZG9yXHJcbiAgICApIHx8XHJcbiAgICAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298cy0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8LW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxidy0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbS18Y2VsbHxjaHRtfGNsZGN8Y21kLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkYy1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZi01fGctbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZC0obXxwfHQpfGhlaS18aGkocHR8dGEpfGhwKCBpfGlwKXxocy1jfGh0KGMoLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGktKDIwfGdvfG1hKXxpMjMwfGlhYyggfC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Yy18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8LVthLXddKXxsaWJ3fGx5bnh8bTEtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG0tY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8LShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwbi0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHQtZ3xxYS1hfHFjKDA3fDEyfDIxfDMyfDYwfC1bMi03XXxpLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGgtfG9vfHAtKXxzZGtcXC98c2UoYygtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaC18c2hhcnxzaWUoLXxtKXxzay0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGgtfHYtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsLXx0ZGctfHRlbChpfG0pfHRpbS18dC1tb3x0byhwbHxzaCl8dHMoNzB8bS18bTN8bTUpfHR4LTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXMtfHlvdXJ8emV0b3x6dGUtL2kudGVzdChcclxuICAgICAgdmVuZG9yLnN1YnN0cigwLCA0KVxyXG4gICAgKVxyXG4gICk7XHJcbn07Il19