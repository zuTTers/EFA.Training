{"version":3,"file":"ngx-scanner-qrcode.js.map","sources":["ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.default.ts","ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.helper.ts","ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.service.ts","ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.component.ts","ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.options.ts","ng://ngx-scanner-qrcode/lib/ngx-scanner-qrcode.module.ts"],"sourcesContent":["import { ScannerQRCodeConfig } from \"./ngx-scanner-qrcode.options\";\r\n\r\nexport const MEDIA_STREAM_DEFAULT: MediaStreamConstraints = {\r\n  audio: false,\r\n  video: true\r\n};\r\n\r\nexport const CONFIG_DEFAULT: ScannerQRCodeConfig = {\r\n  src: '',\r\n  fps: 30,\r\n  vibrate: 300,\r\n  decode: 'utf-8',\r\n  isBeep: true,\r\n  deviceActive: 0,\r\n  constraints: MEDIA_STREAM_DEFAULT,\r\n};","import { AsyncSubject } from \"rxjs\";\r\nimport { CONFIG_DEFAULT } from \"./ngx-scanner-qrcode.default\";\r\nimport { ScannerQRCodeConfig, ScannerQRCodeSelectedFiles } from \"./ngx-scanner-qrcode.options\";\r\ndeclare const zbarWasm: any;\r\n\r\n/**\r\n * OVERRIDES\r\n * @param variableKey \r\n * @param config \r\n * @param defaultConfig \r\n * @returns \r\n */\r\nexport const OVERRIDES = (variableKey: string, config: any, defaultConfig: any) => {\r\n  if (config && Object.keys(config[variableKey]).length) {\r\n    for (const key in defaultConfig) {\r\n      const cloneDeep = JSON.parse(JSON.stringify({ ...config[variableKey], ...{ [key]: (defaultConfig as any)[key] } }));\r\n      config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;\r\n    }\r\n    return config[variableKey];\r\n  } else {\r\n    return defaultConfig;\r\n  }\r\n};\r\n\r\n/**\r\n * Rxjs complete\r\n * @param as\r\n * @param data\r\n * @param error\r\n */\r\nexport const AS_COMPLETE = (as: AsyncSubject<any>, data: any, error = null) => {\r\n  error ? as.error(error) : as.next(data);\r\n  as.complete();\r\n};\r\n\r\n/**\r\n * CAMERA_BEEP\r\n * @param isPlay \r\n * @returns \r\n */\r\nexport const PLAY_AUDIO = (isPlay: boolean = false) => {\r\n  if (isPlay === false) return;\r\n  const audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU' + Array(300).join('101'));\r\n  // when the sound has been loaded, execute your code\r\n  audio.oncanplaythrough = () => {\r\n    const promise = audio.play();\r\n    if (promise) {\r\n      promise.catch((e) => {\r\n        if (e.name === \"NotAllowedError\" || e.name === \"NotSupportedError\") {\r\n          // console.log(e.name);\r\n        }\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * HAS_OWN_PROPERTY\r\n * Fix issue vs ng v 6-7-8\r\n * Optional chaining (?.) just have on ng v 9++\r\n * eg: HAS_OWN_PROPERTY(config, 'frameOptions.style') // output: boolean\r\n * @param obj \r\n * @param propertyPath \r\n * @returns \r\n */\r\nexport const HAS_OWN_PROPERTY = (obj: any, propertyPath: string) => {\r\n  const properties = propertyPath.split(\".\");\r\n  for (let i = 0; i < properties.length; i++) {\r\n    let prop = properties[i];\r\n    if (!obj.hasOwnProperty(prop)) {\r\n      return false;\r\n    } else {\r\n      obj = obj[prop];\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * DRAW_RESULT_APPEND_CHILD\r\n * @param code \r\n * @param oriCanvas \r\n * @param elTarget \r\n */\r\nexport const DRAW_RESULT_APPEND_CHILD = (code: any[], oriCanvas: HTMLCanvasElement, elTarget: HTMLCanvasElement | HTMLDivElement) => {\r\n  let widthZoom;\r\n  let heightZoom;\r\n  let oriWidth = oriCanvas.width;\r\n  let oriHeight = oriCanvas.height;\r\n  let oriWHRatio = oriWidth / oriHeight;\r\n  let imgWidth = parseInt(getComputedStyle(oriCanvas).width);\r\n  let imgHeight = parseInt(getComputedStyle(oriCanvas).height);\r\n  let imgWHRatio = imgWidth / imgHeight;\r\n  elTarget.innerHTML = '';\r\n\r\n  if (oriWHRatio > imgWHRatio) {\r\n    widthZoom = imgWidth / oriWidth;\r\n    heightZoom = imgWidth / oriWHRatio / oriHeight;\r\n  } else {\r\n    heightZoom = imgHeight / oriHeight;\r\n    widthZoom = (imgHeight * oriWHRatio) / oriWidth;\r\n  }\r\n\r\n  for (let i = 0; i < code.length; i++) {\r\n    const _code = code[i];\r\n    // New canvas\r\n    let cvs = document.createElement(\"canvas\");\r\n    let ctx = cvs.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n    let loc: any = {};\r\n    let X: any = [];\r\n    let Y: any = [];\r\n\r\n    // Point x,y\r\n    const points = _code.points;\r\n    for (let j = 0; j < points.length; j++) {\r\n      const xj = HAS_OWN_PROPERTY(points, `${j}.x`) ? points[j].x : 0;\r\n      const yj = HAS_OWN_PROPERTY(points, `${j}.y`) ? points[j].y : 0;\r\n      loc[`x${j + 1}`] = xj;\r\n      loc[`y${j + 1}`] = yj;\r\n      X.push(xj);\r\n      Y.push(yj);\r\n    }\r\n\r\n    // Min max\r\n    let maxX = Math.max(...X);\r\n    let minX = Math.min(...X);\r\n    let maxY = Math.max(...Y);\r\n    let minY = Math.min(...Y);\r\n\r\n    // Add class\r\n    cvs.setAttribute('class', 'qrcode-polygon');\r\n\r\n    // Size with screen zoom\r\n    if (oriWHRatio > imgWHRatio) {\r\n      cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + \"px\";\r\n      cvs.style.left = minX * widthZoom + \"px\";\r\n      cvs.width = (maxX - minX) * widthZoom;\r\n      cvs.height = (maxY - minY) * widthZoom;\r\n    } else {\r\n      cvs.style.top = minY * heightZoom + \"px\";\r\n      cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n      cvs.width = (maxX - minX) * heightZoom;\r\n      cvs.height = (maxY - minY) * heightZoom;\r\n    }\r\n\r\n    // Style for canvas\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'green';\r\n    ctx.fillStyle = \"#55f02880\";\r\n\r\n    // polygon [x,y, x,y, x,y.....];\r\n    const polygon = [];\r\n    for (let k = 0; k < X.length; k++) {\r\n      polygon.push((loc[`x${k + 1}`] - minX) * heightZoom);\r\n      polygon.push((loc[`y${k + 1}`] - minY) * widthZoom);\r\n    }\r\n\r\n    // Copy array\r\n    const shape = polygon.slice(0) as any;\r\n\r\n    // Draw polygon\r\n    ctx.beginPath();\r\n    ctx.moveTo(shape.shift(), shape.shift());\r\n    while (shape.length) {\r\n      ctx.lineTo(shape.shift(), shape.shift()); //x,y\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n\r\n    // Tooltip result\r\n    const qrcodeTooltipTemp = document.createElement('div');\r\n    qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');\r\n    qrcodeTooltipTemp.innerText = _code.value;\r\n\r\n    // Tooltip box\r\n    const qrcodeTooltip = document.createElement('div');\r\n    qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');\r\n    qrcodeTooltip.appendChild(qrcodeTooltipTemp);\r\n    heightZoom = imgHeight / oriHeight;\r\n    widthZoom = (imgHeight * oriWHRatio) / oriWidth;\r\n    qrcodeTooltip.style.fontSize = widthZoom * 15 + 'px';\r\n    qrcodeTooltip.style.top = minY * heightZoom + \"px\";\r\n    qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n    qrcodeTooltip.style.width = (maxX - minX) * heightZoom + \"px\";\r\n    qrcodeTooltip.style.height = (maxY - minY) * heightZoom + \"px\";\r\n\r\n    // Result text\r\n    const resultText = document.createElement('span');\r\n    resultText.innerText = _code.value;\r\n    resultText.style.fontSize = widthZoom * 13 + 'px';\r\n\r\n    // Set position result text\r\n    resultText.style.top = minY * heightZoom + (-20 * heightZoom) + \"px\";\r\n    resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + \"px\";\r\n\r\n    if (elTarget) {\r\n      elTarget.appendChild(qrcodeTooltip);\r\n      elTarget.appendChild(resultText);\r\n      elTarget.appendChild(cvs);\r\n    }\r\n  };\r\n\r\n}\r\n\r\n/**\r\n * DRAW_RESULT_ON_CANVAS\r\n * @param code \r\n * @param cvs \r\n */\r\nexport const DRAW_RESULT_ON_CANVAS = (code: any[], cvs: HTMLCanvasElement) => {\r\n  let ctx = cvs.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n\r\n  for (let i = 0; i < code.length; i++) {\r\n    const _code = code[i];\r\n    let loc: any = {};\r\n    let X: any = [];\r\n    let Y: any = [];\r\n\r\n    // Point x,y\r\n    const points = _code.points;\r\n    for (let j = 0; j < points.length; j++) {\r\n      const xj = HAS_OWN_PROPERTY(points, `${j}.x`) ? points[j].x : 0;\r\n      const yj = HAS_OWN_PROPERTY(points, `${j}.y`) ? points[j].y : 0;\r\n      loc[`x${j + 1}`] = xj;\r\n      loc[`y${j + 1}`] = yj;\r\n      X.push(xj);\r\n      Y.push(yj);\r\n    }\r\n\r\n    // Min max\r\n    let minX = Math.min(...X);\r\n    let minY = Math.min(...Y);\r\n\r\n    // Style for canvas\r\n    ctx.lineWidth = 1;\r\n    ctx.strokeStyle = 'green';\r\n    ctx.fillStyle = \"#55f02880\";\r\n    ctx.font = \"15px serif\";\r\n    FILL_TEXT_MULTI_LINE(ctx, _code.value, minX, minY - 5)\r\n\r\n    // polygon [x,y, x,y, x,y.....];\r\n    const polygon = [];\r\n    for (let k = 0; k < X.length; k++) {\r\n      polygon.push(loc[`x${k + 1}`]);\r\n      polygon.push(loc[`y${k + 1}`]);\r\n    }\r\n\r\n    // Copy array\r\n    const shape = polygon.slice(0) as any;\r\n\r\n    // Draw polygon\r\n    ctx.beginPath();\r\n    ctx.moveTo(shape.shift(), shape.shift());\r\n    while (shape.length) {\r\n      ctx.lineTo(shape.shift(), shape.shift()); //x,y\r\n    }\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n  };\r\n}\r\n\r\n/**\r\n * READ_AS_DATA_URL\r\n * @param file \r\n * @param config \r\n * @return Promise\r\n */\r\nexport const READ_AS_DATA_URL = (file: File, config: ScannerQRCodeConfig): Promise<ScannerQRCodeSelectedFiles> => {\r\n  /** overrides **/\r\n  let decode = HAS_OWN_PROPERTY(config, 'decode') ? config.decode : CONFIG_DEFAULT.decode;\r\n\r\n  /** drawImage **/\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.onload = () => {\r\n      const objectFile = {\r\n        name: file.name,\r\n        file: file,\r\n        url: URL.createObjectURL(file)\r\n      };\r\n      // Set the src of this Image object.\r\n      const image = new Image();\r\n      // Setting cross origin value to anonymous\r\n      image.setAttribute('crossOrigin', 'anonymous');\r\n      // When our image has loaded.\r\n      image.onload = async () => {\r\n        // Get the canvas element by using the getElementById method.\r\n        const canvas = document.createElement('canvas');\r\n        // HTMLImageElement size\r\n        canvas.width = image.naturalWidth || image.width;\r\n        canvas.height = image.naturalHeight || image.height;\r\n        // Get a 2D drawing context for the canvas.\r\n        const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n        // Draw image\r\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n        // Data image\r\n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n        // Scanner\r\n        const code = await zbarWasm.scanImageData(imageData);\r\n        if (code && code.length) {\r\n          // Decode\r\n          code.forEach((s: any) => s.value = s.decode(decode && decode.toLocaleLowerCase()));\r\n\r\n          // Overlay\r\n          DRAW_RESULT_ON_CANVAS(code, canvas);\r\n\r\n          // Emit object\r\n          const blob = await CANVAS_TO_BLOB(canvas);\r\n          const url = URL.createObjectURL(blob);\r\n          const blobToFile = (theBlob: any, fileName: string) => new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\r\n          resolve(Object.assign({}, objectFile, { data: code, url: url, canvas: canvas, file: blobToFile(blob, objectFile.name) }));\r\n        } else {\r\n          resolve(Object.assign({}, objectFile, { data: code, canvas: canvas }));\r\n        }\r\n      };\r\n      // Set src\r\n      image.src = objectFile.url;\r\n    }\r\n    fileReader.onerror = (error: any) => reject(error);\r\n    fileReader.readAsDataURL(file);\r\n  })\r\n}\r\n\r\n/**\r\n * Convert canvas to blob\r\n * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality\r\n * @param canvas \r\n * @param type \r\n * @return Promise\r\n */\r\nexport const CANVAS_TO_BLOB = (canvas: HTMLCanvasElement, type?: string): Promise<any> => {\r\n  return new Promise((resolve, reject) => canvas.toBlob(blob => resolve(blob), type));\r\n}\r\n\r\n/**\r\n * Convert blob to file\r\n * @param theBlob \r\n * @param fileName \r\n * @return File\r\n */\r\nexport const BLOB_TO_FILE = (theBlob: any, fileName: string): File => {\r\n  return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });\r\n}\r\n\r\n/**\r\n * FILES_TO_SCAN\r\n * @param files \r\n * @return AsyncSubject\r\n */\r\nexport const FILES_TO_SCAN = (files: File[] = [], configs: ScannerQRCodeConfig, as = new AsyncSubject<ScannerQRCodeSelectedFiles[]>()): AsyncSubject<ScannerQRCodeSelectedFiles[]> => {\r\n  Promise.all(Object.assign([], files).map(m => READ_AS_DATA_URL(m, configs))).then((img: ScannerQRCodeSelectedFiles[]) => AS_COMPLETE(as, img)).catch((error: any) => AS_COMPLETE(as, null, error));\r\n  return as;\r\n}\r\n\r\n/**\r\n * FILL_TEXT_MULTI_LINE\r\n * @param ctx \r\n * @param text \r\n * @param x \r\n * @param y \r\n */\r\nexport const FILL_TEXT_MULTI_LINE = (ctx: CanvasRenderingContext2D, text: string, x: number, y: number) => {\r\n  let lineHeight = ctx.measureText(\"M\").width * 1.2;\r\n  let lines = text.split(\"\\n\");\r\n  for (var i = 0; i < lines.length; ++i) {\r\n    ctx.fillText(lines[i], x, y);\r\n    ctx.strokeText(lines[i], x, y);\r\n    y += lineHeight;\r\n  }\r\n}\r\n\r\n/**\r\n * VIBRATE\r\n * Báº­t rung trÃªn mobile\r\n * @param time \r\n */\r\nexport const VIBRATE = (time: number) => {\r\n  time && IS_MOBILE() && window.navigator.vibrate(time);\r\n};\r\n\r\n/**\r\n * IS_MOBILE\r\n * @returns \r\n */\r\nexport const IS_MOBILE = () => {\r\n  const vendor = navigator.userAgent || navigator['vendor'] || window['opera'];\r\n  return !!(\r\n    /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n      vendor\r\n    ) ||\r\n    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\r\n      vendor.substr(0, 4)\r\n    )\r\n  );\r\n};","import { Injectable } from '@angular/core';\r\nimport { AsyncSubject } from 'rxjs';\r\nimport { AS_COMPLETE, FILES_TO_SCAN } from './ngx-scanner-qrcode.helper';\r\nimport { ScannerQRCodeConfig, ScannerQRCodeSelectedFiles } from './ngx-scanner-qrcode.options';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxScannerQrcodeService {\r\n\r\n  /**\r\n   * Load files\r\n   * @param files \r\n   * @return AsyncSubject\r\n   */\r\n  public loadFiles(files: File[] = []): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    const as = new AsyncSubject<ScannerQRCodeSelectedFiles[]>();\r\n    Promise.all(Object.assign([], files).map(m => this.readAsDataURL(m))).then((img: ScannerQRCodeSelectedFiles[]) => AS_COMPLETE(as, img)).catch((error: any) => AS_COMPLETE(as, null, error));\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * loadFilesToScan\r\n   * @param files \r\n   * @param config \r\n   * @returns \r\n   */\r\n  public loadFilesToScan(files: File[] = [], config: ScannerQRCodeConfig): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    return FILES_TO_SCAN(files, config);\r\n  }\r\n\r\n  /**\r\n   * readAsDataURL\r\n   * @param file \r\n   * @return Promise\r\n   */\r\n  private readAsDataURL(file: File): Promise<ScannerQRCodeSelectedFiles> {\r\n    /** drawImage **/\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = () => {\r\n        const objectFile = {\r\n          name: file.name,\r\n          file: file,\r\n          url: URL.createObjectURL(file)\r\n        };\r\n        resolve(objectFile);\r\n      }\r\n      fileReader.onerror = (error: any) => reject(error);\r\n      fileReader.readAsDataURL(file);\r\n    })\r\n  }\r\n}","import { Component, ElementRef, EventEmitter, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { BehaviorSubject, AsyncSubject } from 'rxjs';\r\nimport { AS_COMPLETE, BLOB_TO_FILE, CANVAS_TO_BLOB, DRAW_RESULT_APPEND_CHILD, FILES_TO_SCAN, HAS_OWN_PROPERTY, OVERRIDES, PLAY_AUDIO, VIBRATE } from './ngx-scanner-qrcode.helper';\r\nimport { ScannerQRCodeConfig, ScannerQRCodeDevice, ScannerQRCodeResult, ScannerQRCodeSelectedFiles } from './ngx-scanner-qrcode.options';\r\nimport { CONFIG_DEFAULT, MEDIA_STREAM_DEFAULT } from './ngx-scanner-qrcode.default';\r\ndeclare const zbarWasm: any;\r\n\r\n@Component({\r\n  selector: 'ngx-scanner-qrcode',\r\n  template: `<div #resultsPanel class=\"origin-overlay\"></div><canvas #canvas class=\"origin-canvas\"></canvas><video #video playsinline class=\"origin-video\"></video>`,\r\n  styleUrls: ['./ngx-scanner-qrcode.component.scss'],\r\n  host: { 'class': 'ngx-scanner-qrcode' },\r\n  exportAs: 'scanner',\r\n  inputs: ['src', 'fps', 'vibrate', 'decode', 'isBeep', 'deviceActive', 'config', 'constraints'],\r\n  outputs: ['event'],\r\n  queries: {\r\n    video: new ViewChild('video'),\r\n    canvas: new ViewChild('canvas'),\r\n    resultsPanel: new ViewChild('resultsPanel')\r\n  },\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class NgxScannerQrcodeComponent implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Element\r\n   * playsinline required to tell iOS safari we don't want fullscreen\r\n   */\r\n  public video!: ElementRef<HTMLVideoElement>;\r\n  public canvas!: ElementRef<HTMLCanvasElement>;\r\n  public resultsPanel!: ElementRef<HTMLDivElement>;\r\n\r\n  /**\r\n   * EventEmitter\r\n   */\r\n  public event = new EventEmitter<ScannerQRCodeResult[]>();\r\n\r\n  /**\r\n   * Input\r\n   */\r\n  public src: string | undefined = CONFIG_DEFAULT.src;\r\n  public fps: number | undefined = CONFIG_DEFAULT.fps;\r\n  public vibrate: number | undefined = CONFIG_DEFAULT.vibrate;\r\n  public decode: string | undefined = CONFIG_DEFAULT.decode;\r\n  public isBeep: boolean | undefined = CONFIG_DEFAULT.isBeep;\r\n  public deviceActive: number | undefined = CONFIG_DEFAULT.deviceActive;\r\n  public config: ScannerQRCodeConfig = CONFIG_DEFAULT;\r\n  public constraints: MediaStreamConstraints | any | undefined = CONFIG_DEFAULT.constraints;\r\n\r\n  /**\r\n   * Export\r\n   */\r\n  public isStart: boolean = false;\r\n  public isLoading: boolean = false;\r\n  public isTorch: boolean = false;\r\n  public data = new BehaviorSubject<ScannerQRCodeResult[]>([]);\r\n  public devices = new BehaviorSubject<ScannerQRCodeDevice[]>([]);\r\n\r\n  /**\r\n   * Private\r\n   */\r\n  private rAF_ID: any;\r\n  private dataForResize: ScannerQRCodeResult[] = [];\r\n\r\n  ngOnInit(): void {\r\n    this.overrideConfig();\r\n    if (this.src) {\r\n      this.loadImage(this.src);\r\n    }\r\n    this.resize();\r\n  }\r\n\r\n  /**\r\n   * start\r\n   * @return AsyncSubject\r\n   */\r\n  public start(): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isStart) {\r\n      // Reject\r\n      AS_COMPLETE(as, false);\r\n    } else {\r\n      // mediaDevices\r\n      this.loadAllDevices(as);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * playDevice\r\n   * @param deviceId \r\n   * @param as \r\n   * @return AsyncSubject \r\n   */\r\n  public playDevice(deviceId: string, as: AsyncSubject<any> = new AsyncSubject<any>()): AsyncSubject<any> {\r\n    const existDeviceId = this.isStart ? this.getConstraints().deviceId != deviceId : true;\r\n    switch (true) {\r\n      case deviceId == 'null' || deviceId == null:\r\n        this.stop();\r\n        AS_COMPLETE(as, false);\r\n        break;\r\n      case deviceId && existDeviceId:\r\n        stop();\r\n        this.stop();\r\n        clearInterval(this.rAF_ID);\r\n        // Loading on\r\n        this.status(false, true);\r\n        const constraints = {\r\n          audio: false,\r\n          video: (typeof (this.constraints && this.constraints.video) === 'boolean') ? { deviceId: deviceId } : Object.assign({ deviceId: deviceId }, this.constraints && this.constraints.video)\r\n        };\r\n        this.deviceActive = this.devices.value.findIndex(f => f.deviceId == deviceId);\r\n        // MediaStream\r\n        navigator.mediaDevices.getUserMedia(constraints).then((stream: MediaStream) => {\r\n          this.video.nativeElement.srcObject = stream;\r\n          this.video.nativeElement.onloadedmetadata = () => {\r\n            this.video.nativeElement.play();\r\n            this.requestAnimationFrame();\r\n            this.status(true, false);\r\n            AS_COMPLETE(as, true);\r\n          }\r\n        }).catch(error => {\r\n          this.status(false, false);\r\n          this.eventEmit(false);\r\n          AS_COMPLETE(as, false, error);\r\n        });\r\n        break;\r\n      default:\r\n        AS_COMPLETE(as, false);\r\n        break;\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * stop\r\n   * @return AsyncSubject\r\n   */\r\n  public stop(): AsyncSubject<any> {\r\n    this.eventEmit(null);\r\n    this.status(false, false);\r\n    const as = new AsyncSubject<any>();\r\n    try {\r\n      this.removeCanvas();\r\n      clearInterval(this.rAF_ID);\r\n      (this.video.nativeElement.srcObject as MediaStream).getTracks().forEach((track: any) => {\r\n        track.stop();\r\n        AS_COMPLETE(as, true);\r\n      });\r\n    } catch (error) {\r\n      AS_COMPLETE(as, false, error as any);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * play\r\n   * @return AsyncSubject\r\n   */\r\n  public play(): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isPause) {\r\n      this.video.nativeElement.play();\r\n      this.requestAnimationFrame();\r\n      AS_COMPLETE(as, true);\r\n    } else {\r\n      AS_COMPLETE(as, false);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * pause\r\n   * @return AsyncSubject \r\n   */\r\n  public pause(): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    if (this.isStart) {\r\n      clearInterval(this.rAF_ID);\r\n      this.video.nativeElement.pause();\r\n      AS_COMPLETE(as, true);\r\n    } else {\r\n      AS_COMPLETE(as, false);\r\n    }\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * loadImage\r\n   * @param src \r\n   * @return AsyncSubject\r\n   */\r\n  public loadImage(src: string): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    // Loading on\r\n    this.status(false, true);\r\n    // Set the src of this Image object.\r\n    const image = new Image();\r\n    // Setting cross origin value to anonymous\r\n    image.setAttribute('crossOrigin', 'anonymous');\r\n    // When our image has loaded.\r\n    image.onload = () => {\r\n      this.drawImage(image, (flag: boolean) => {\r\n        this.status(false, false);\r\n        AS_COMPLETE(as, flag);\r\n      });\r\n    };\r\n    // Set src\r\n    image.src = src;\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * torcher\r\n   * @return AsyncSubject\r\n   */\r\n  public torcher(): AsyncSubject<any> {\r\n    const as = this.applyConstraints({ torch: this.isTorch })\r\n    as.subscribe(() => false, () => this.isTorch = !this.isTorch);\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * applyConstraints\r\n   * @return AsyncSubject\r\n   */\r\n  public applyConstraints(constraints: MediaTrackConstraintSet | any): AsyncSubject<any> {\r\n    const as = new AsyncSubject<any>();\r\n    const stream = this.video.nativeElement.srcObject as MediaStream;\r\n    const videoTrack = stream.getVideoTracks()[0] as MediaStreamTrack;\r\n    const imageCapture = new (window as any).ImageCapture(videoTrack);\r\n    imageCapture.getPhotoCapabilities().then(async () => {\r\n      await videoTrack.applyConstraints({ advanced: [constraints] } as MediaTrackConstraints);\r\n      AS_COMPLETE(as, true);\r\n    }).catch((error: any) => {\r\n      switch (error && error.name) {\r\n        case 'NotFoundError':\r\n        case 'DevicesNotFoundError':\r\n          AS_COMPLETE(as, false, 'Required track is missing' as any);\r\n          break;\r\n        case 'NotReadableError':\r\n        case 'TrackStartError':\r\n          AS_COMPLETE(as, false, 'Webcam or mic are already in use' as any);\r\n          break;\r\n        case 'OverconstrainedError':\r\n        case 'ConstraintNotSatisfiedError':\r\n          AS_COMPLETE(as, false, 'Constraints can not be satisfied by avb. devices' as any);\r\n          break;\r\n        case 'NotAllowedError':\r\n        case 'PermissionDeniedError':\r\n          AS_COMPLETE(as, false, 'Permission denied in browser' as any);\r\n          break;\r\n        case 'TypeError':\r\n          AS_COMPLETE(as, false, 'Empty constraints object' as any);\r\n          break;\r\n        default:\r\n          AS_COMPLETE(as, false, error as any);\r\n          break;\r\n      }\r\n    });\r\n    return as;\r\n  };\r\n\r\n  /**\r\n   * getConstraints\r\n   * @param deviceActive \r\n   * @returns \r\n   */\r\n  public getConstraints(): MediaTrackConstraintSet | any {\r\n    const stream = this.video.nativeElement.srcObject as MediaStream;\r\n    const videoTrack = stream && stream.getVideoTracks()[0] as MediaStreamTrack;\r\n    return videoTrack && videoTrack.getConstraints() as any;\r\n  }\r\n\r\n  /**\r\n   * download\r\n   * @param fileName \r\n   * @return AsyncSubject\r\n   */\r\n  public download(fileName: string = `ngx-scanner-qrcode-${Date.now()}.png`): AsyncSubject<ScannerQRCodeSelectedFiles[]> {\r\n    const as = new AsyncSubject<any>();\r\n    const run = async () => {\r\n      const blob = await CANVAS_TO_BLOB(this.canvas.nativeElement);\r\n      const file = BLOB_TO_FILE(blob, fileName);\r\n      FILES_TO_SCAN([file], this.config, as).subscribe((res: ScannerQRCodeSelectedFiles[]) => {\r\n        res.forEach((item: ScannerQRCodeSelectedFiles) => {\r\n          const link = document.createElement('a');\r\n          link.href = item.url;\r\n          link.download = item.name;\r\n          link.click();\r\n          link.remove()\r\n        });\r\n      });\r\n    }\r\n    run();\r\n    return as;\r\n  }\r\n\r\n  /**\r\n   * window: resize\r\n   * Draw again!\r\n   */\r\n  private resize(): void {\r\n    window.addEventListener(\"resize\", () => {\r\n      if (this.dataForResize && this.dataForResize.length) {\r\n        DRAW_RESULT_APPEND_CHILD(this.dataForResize as any, this.canvas.nativeElement, this.resultsPanel.nativeElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Override config\r\n   * @return void\r\n   */\r\n  private overrideConfig(): void {\r\n    if (HAS_OWN_PROPERTY(this.config, 'src')) this.src = this.config.src;\r\n    if (HAS_OWN_PROPERTY(this.config, 'fps')) this.fps = this.config.fps;\r\n    if (HAS_OWN_PROPERTY(this.config, 'vibrate')) this.vibrate = this.config.vibrate;\r\n    if (HAS_OWN_PROPERTY(this.config, 'decode')) this.decode = this.config.decode;\r\n    if (HAS_OWN_PROPERTY(this.config, 'isBeep')) this.isBeep = this.config.isBeep;\r\n    if (HAS_OWN_PROPERTY(this.config, 'deviceActive')) this.deviceActive = this.config.deviceActive;\r\n    if (HAS_OWN_PROPERTY(this.config, 'constraints')) this.constraints = OVERRIDES('constraints', this.config, MEDIA_STREAM_DEFAULT);\r\n  }\r\n\r\n  /**\r\n   * loadAllDevices\r\n   */\r\n  private loadAllDevices(as: AsyncSubject<any>): void {\r\n    navigator.mediaDevices.enumerateDevices().then(devices => {\r\n      let cameraDevices: ScannerQRCodeDevice[] = [];\r\n      devices.forEach(f => f.kind == 'videoinput' && cameraDevices.push(f));\r\n      this.devices.next(cameraDevices);\r\n      if (cameraDevices.length > 0) {\r\n        const index = Math.max(0, (cameraDevices.length > this.deviceActive ? this.deviceActive : 0));\r\n        this.playDevice(cameraDevices[index].deviceId, as);\r\n      } else {\r\n        AS_COMPLETE(as, false, 'No camera detected.' as any);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * drawImage\r\n   * @param element \r\n   * @param callback \r\n   */\r\n  private async drawImage(element: HTMLImageElement | HTMLVideoElement, callback: Function = () => { }): Promise<void> {\r\n    // Get the canvas element by using the getElementById method.\r\n    const canvas = this.canvas.nativeElement;\r\n    // Get a 2D drawing context for the canvas.\r\n    const ctx = canvas.getContext('2d', { willReadFrequently: true }) as CanvasRenderingContext2D;\r\n    // HTMLImageElement size\r\n    if (element instanceof HTMLImageElement) {\r\n      canvas.width = element.naturalWidth;\r\n      canvas.height = element.naturalHeight;\r\n      element.style.visibility = '';\r\n      this.video.nativeElement.style.visibility = 'hidden';\r\n      this.video.nativeElement.style.height = canvas.offsetHeight + 'px';\r\n    }\r\n    // HTMLVideoElement size\r\n    if (element instanceof HTMLVideoElement) {\r\n      canvas.width = element.videoWidth;\r\n      canvas.height = element.videoHeight;\r\n      element.style.visibility = '';\r\n      this.canvas.nativeElement.style.visibility = 'hidden';\r\n    }\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    // Draw image\r\n    ctx.drawImage(element, 0, 0, canvas.width, canvas.height);\r\n    // Data image\r\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    // Draw frame\r\n    const code = await zbarWasm.scanImageData(imageData);\r\n    if (code && code.length) {\r\n      // Decode\r\n      code.forEach((s: any) => s.value = s.decode(this.decode && this.decode.toLocaleLowerCase()));\r\n\r\n      // Overlay\r\n      DRAW_RESULT_APPEND_CHILD(code, Object.freeze(this.canvas.nativeElement), this.resultsPanel.nativeElement);\r\n\r\n      // To blob and emit data\r\n      const EMIT_DATA = () => {\r\n        this.eventEmit(code);\r\n        this.dataForResize = code;\r\n      };\r\n\r\n      // HTMLImageElement\r\n      if (element instanceof HTMLImageElement) {\r\n        callback(true);\r\n        EMIT_DATA();\r\n        VIBRATE(this.vibrate);\r\n        PLAY_AUDIO(this.isBeep);\r\n      }\r\n      // HTMLVideoElement\r\n      if (element instanceof HTMLVideoElement) {\r\n        EMIT_DATA();\r\n        VIBRATE(this.vibrate);\r\n        PLAY_AUDIO(this.isBeep);\r\n      }\r\n    } else {\r\n      callback(false);\r\n      this.removeCanvas();\r\n      this.dataForResize = code;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * removeCanvas\r\n   */\r\n  private removeCanvas(): void {\r\n    Object.assign([], this.resultsPanel.nativeElement.childNodes).forEach(el => this.resultsPanel.nativeElement.removeChild(el));\r\n  }\r\n\r\n  /**\r\n   * status\r\n   * @param isStart \r\n   * @param isLoading \r\n   */\r\n  private status(isStart: boolean, isLoading: boolean): void {\r\n    this.isStart = isStart;\r\n    this.isLoading = isLoading;\r\n  }\r\n\r\n  /**\r\n   * eventEmit\r\n   * @param response \r\n   */\r\n  private eventEmit(response: any = false): void {\r\n    (response !== false) && this.data.next(response || { data: null });\r\n    (response !== false) && this.event.emit(response || { data: null });\r\n  }\r\n\r\n  /**\r\n   * Single-thread\r\n   * Loop Recording on Camera\r\n   * Must be destroy request \r\n   * Not using: requestAnimationFrame\r\n   */\r\n  private requestAnimationFrame(): void {\r\n    this.rAF_ID = setInterval(() => {\r\n      if (this.video.nativeElement.readyState === this.video.nativeElement.HAVE_ENOUGH_DATA) {\r\n        this.drawImage(this.video.nativeElement);\r\n      }\r\n    }, this.fps);\r\n  }\r\n\r\n  /**\r\n   * Status of camera\r\n   * @return boolean\r\n   */\r\n  get isPause(): boolean {\r\n    return this.isStart && this.video.nativeElement.paused;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.pause();\r\n  }\r\n}","export interface ScannerQRCodeConfig {\r\n  src?: string;\r\n  fps?: number;\r\n  vibrate?: number; /** support mobile */\r\n  decode?: string;\r\n  isBeep?: boolean;\r\n  deviceActive?: number;\r\n  constraints?: MediaStreamConstraints | any;\r\n}\r\n\r\nexport interface ScannerQRCodeSelectedFiles {\r\n  url: string;\r\n  name: string;\r\n  file: File;\r\n  data?: ScannerQRCodeResult[];\r\n  canvas?: HTMLCanvasElement;\r\n}\r\n\r\nexport interface ScannerQRCodeDevice {\r\n  kind: string;\r\n  label: string;\r\n  groupId: string;\r\n  deviceId: string;\r\n}\r\n\r\nexport interface ScannerQRCodePoint {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport enum ScannerQRCodeSymbolType {\r\n  ScannerQRCode_NONE = 0,   /**< no symbol decoded */\r\n  ScannerQRCode_PARTIAL = 1,   /**< intermediate status */\r\n  ScannerQRCode_EAN2 = 2,   /**< GS1 2-digit add-on */\r\n  ScannerQRCode_EAN5 = 5,   /**< GS1 5-digit add-on */\r\n  ScannerQRCode_EAN8 = 8,   /**< EAN-8 */\r\n  ScannerQRCode_UPCE = 9,   /**< UPC-E */\r\n  ScannerQRCode_ISBN10 = 10,  /**< ISBN-10 (from EAN-13). @since 0.4 */\r\n  ScannerQRCode_UPCA = 12,  /**< UPC-A */\r\n  ScannerQRCode_EAN13 = 13,  /**< EAN-13 */\r\n  ScannerQRCode_ISBN13 = 14,  /**< ISBN-13 (from EAN-13). @since 0.4 */\r\n  ScannerQRCode_COMPOSITE = 15,  /**< EAN/UPC composite */\r\n  ScannerQRCode_I25 = 25,  /**< Interleaved 2 of 5. @since 0.4 */\r\n  ScannerQRCode_DATABAR = 34,  /**< GS1 DataBar (RSS). @since 0.11 */\r\n  ScannerQRCode_DATABAR_EXP = 35,  /**< GS1 DataBar Expanded. @since 0.11 */\r\n  ScannerQRCode_CODABAR = 38,  /**< Codabar. @since 0.11 */\r\n  ScannerQRCode_CODE39 = 39,  /**< Code 39. @since 0.4 */\r\n  ScannerQRCode_PDF417 = 57,  /**< PDF417. @since 0.6 */\r\n  ScannerQRCode_QRCODE = 64,  /**< QR Code. @since 0.10 */\r\n  ScannerQRCode_SQCODE = 80,  /**< SQ Code. @since 0.20.1 */\r\n  ScannerQRCode_CODE93 = 93,  /**< Code 93. @since 0.11 */\r\n  ScannerQRCode_CODE128 = 128, /**< Code 128 */\r\n\r\n  /*\r\n   * Please see _ScannerQRCode_get_symbol_hash() if adding\r\n   * anything after 128\r\n   */\r\n\r\n  /** mask for base symbol type.\r\n   * @deprecated in 0.11, remove this from existing code\r\n   */\r\n  ScannerQRCode_SYMBOL = 0x00ff,\r\n  /** 2-digit add-on flag.\r\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN2 component is used for\r\n   * 2-digit GS1 add-ons\r\n   */\r\n  ScannerQRCode_ADDON2 = 0x0200,\r\n  /** 5-digit add-on flag.\r\n   * @deprecated in 0.11, a ::ScannerQRCode_EAN5 component is used for\r\n   * 5-digit GS1 add-ons\r\n   */\r\n  ScannerQRCode_ADDON5 = 0x0500,\r\n  /** add-on flag mask.\r\n   * @deprecated in 0.11, GS1 add-ons are represented using composite\r\n   * symbols of type ::ScannerQRCode_COMPOSITE; add-on components use ::ScannerQRCode_EAN2\r\n   * or ::ScannerQRCode_EAN5\r\n   */\r\n  ScannerQRCode_ADDON = 0x0700,\r\n}\r\n\r\nexport enum ScannerQRCodeConfigType {\r\n  ScannerQRCode_CFG_ENABLE = 0,            /**< enable symbology/feature */\r\n  ScannerQRCode_CFG_ADD_CHECK,        /**< enable check digit when optional */\r\n  ScannerQRCode_CFG_EMIT_CHECK,       /**< return check digit when present */\r\n  ScannerQRCode_CFG_ASCII,            /**< enable full ASCII character set */\r\n  ScannerQRCode_CFG_BINARY,           /**< don't convert binary data to text */\r\n  ScannerQRCode_CFG_NUM,              /**< number of boolean decoder configs */\r\n\r\n  ScannerQRCode_CFG_MIN_LEN = 0x20,        /**< minimum data length for valid decode */\r\n  ScannerQRCode_CFG_MAX_LEN,        /**< maximum data length for valid decode */\r\n\r\n  ScannerQRCode_CFG_UNCERTAINTY = 0x40,    /**< required video consistency frames */\r\n\r\n  ScannerQRCode_CFG_POSITION = 0x80,       /**< enable scanner to collect position data */\r\n  ScannerQRCode_CFG_TEST_INVERTED,  /**< if fails to decode, test inverted */\r\n\r\n  ScannerQRCode_CFG_X_DENSITY = 0x100,     /**< image scanner vertical scan density */\r\n  ScannerQRCode_CFG_Y_DENSITY,     /**< image scanner horizontal scan density */\r\n}\r\n\r\nexport enum ScannerQRCodeOrientation {\r\n  ScannerQRCode_ORIENT_UNKNOWN = -1,       /**< unable to determine orientation */\r\n  ScannerQRCode_ORIENT_UP,            /**< upright, read left to right */\r\n  ScannerQRCode_ORIENT_RIGHT,         /**< sideways, read top to bottom */\r\n  ScannerQRCode_ORIENT_DOWN,          /**< upside-down, read right to left */\r\n  ScannerQRCode_ORIENT_LEFT,          /**< sideways, read bottom to top */\r\n}\r\n\r\nclass ScannerQRCodeTypePointer {\r\n  protected ptr: number;\r\n  protected ptr32: number;\r\n  protected buf: ArrayBuffer;\r\n  protected HEAP8: Int8Array;\r\n  protected HEAP32: Int32Array;\r\n  protected HEAPU32: Uint32Array;\r\n\r\n  constructor(ptr: number, buf: ArrayBuffer) {\r\n    this.ptr = ptr;\r\n    this.ptr32 = ptr >> 2;\r\n    this.buf = buf;\r\n    this.HEAP8 = new Int8Array(buf);\r\n    this.HEAPU32 = new Uint32Array(buf);\r\n    this.HEAP32 = new Int32Array(buf);\r\n  }\r\n}\r\n\r\nclass ScannerQRCodeSymbolPtr extends ScannerQRCodeTypePointer {\r\n  get type(): ScannerQRCodeSymbolType {\r\n    return this.HEAPU32[this.ptr32] as ScannerQRCodeSymbolType;\r\n  }\r\n\r\n  get data(): Int8Array {\r\n    const len = this.HEAPU32[this.ptr32 + 4];\r\n    const ptr = this.HEAPU32[this.ptr32 + 5];\r\n    return Int8Array.from(this.HEAP8.subarray(ptr, ptr + len));\r\n  }\r\n\r\n  get points(): Array<ScannerQRCodePoint> {\r\n    const len = this.HEAPU32[this.ptr32 + 7];\r\n    const ptr = this.HEAPU32[this.ptr32 + 8];\r\n    const ptr32 = ptr >> 2;\r\n    const res: ScannerQRCodePoint[] = [];\r\n    for (let i = 0; i < len; ++i) {\r\n      const x = this.HEAP32[ptr32 + i * 2];\r\n      const y = this.HEAP32[ptr32 + i * 2 + 1];\r\n      res.push({ x, y } as ScannerQRCodePoint);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  get orientation(): ScannerQRCodeOrientation {\r\n    return this.HEAP32[this.ptr32 + 9];\r\n  }\r\n\r\n  get next(): ScannerQRCodeSymbolPtr | null {\r\n    const ptr = this.HEAPU32[this.ptr32 + 11];\r\n    if (!ptr) return null;\r\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\r\n  }\r\n\r\n  get time(): number {\r\n    return this.HEAPU32[this.ptr32 + 13];\r\n  }\r\n\r\n  get cacheCount(): number {\r\n    return this.HEAP32[this.ptr32 + 14];\r\n  }\r\n\r\n  get quality(): number {\r\n    return this.HEAP32[this.ptr32 + 15];\r\n  }\r\n}\r\n\r\nclass SymbolSetPtr extends ScannerQRCodeTypePointer {\r\n  get head(): ScannerQRCodeSymbolPtr | null {\r\n    const ptr = this.HEAPU32[this.ptr32 + 2];\r\n    if (!ptr) return null;\r\n    return new ScannerQRCodeSymbolPtr(ptr, this.buf);\r\n  }\r\n}\r\n\r\nexport class ScannerQRCodeResult {\r\n  type: ScannerQRCodeSymbolType;\r\n  typeName: string;\r\n  data: Int8Array;\r\n  points: Array<ScannerQRCodePoint>;\r\n  orientation: ScannerQRCodeOrientation;\r\n  time: number;\r\n  cacheCount: number;\r\n  quality: number;\r\n  value: string = '';\r\n\r\n  private constructor(ptr: ScannerQRCodeSymbolPtr) {\r\n    this.type = ptr.type;\r\n    this.typeName = ScannerQRCodeSymbolType[this.type];\r\n    this.data = ptr.data;\r\n    this.points = ptr.points;\r\n    this.orientation = ptr.orientation;\r\n    this.time = ptr.time;\r\n    this.cacheCount = ptr.cacheCount;\r\n    this.quality = ptr.quality;\r\n  }\r\n\r\n  static createSymbolsFromPtr(ptr: number, buf: ArrayBuffer): Array<ScannerQRCodeResult> {\r\n    if (ptr == 0) return [];\r\n\r\n    const set = new SymbolSetPtr(ptr, buf);\r\n    let symbol = set.head;\r\n    const res: ScannerQRCodeResult[] = [];\r\n    while (symbol !== null) {\r\n      res.push(new ScannerQRCodeResult(symbol));\r\n      symbol = symbol.next;\r\n    }\r\n    return res;\r\n  }\r\n\r\n  decode(encoding?: string) {\r\n    const decoder = new TextDecoder(encoding);\r\n    return decoder.decode(this.data);\r\n  }\r\n}","import { NgModule } from \"@angular/core\";\r\nimport { NgxScannerQrcodeService } from \"./ngx-scanner-qrcode.service\";\r\nimport { NgxScannerQrcodeComponent } from \"./ngx-scanner-qrcode.component\";\r\n\r\n\r\n@NgModule({\r\n  declarations: [NgxScannerQrcodeComponent],\r\n  exports: [NgxScannerQrcodeComponent],\r\n  providers: [NgxScannerQrcodeService],\r\n})\r\nexport class NgxScannerQrcodeModule {}\r\n"],"names":[],"mappings":"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"}
