/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { AsyncSubject } from "rxjs";
import { CONFIG_DEFAULT } from "./ngx-scanner-qrcode.default";
/**
 * OVERRIDES
 * \@param variableKey
 * \@param config
 * \@param defaultConfig
 * \@return
 * @type {?}
 */
export const OVERRIDES = (/**
 * @param {?} variableKey
 * @param {?} config
 * @param {?} defaultConfig
 * @return {?}
 */
(variableKey, config, defaultConfig) => {
    if (config && Object.keys(config[variableKey]).length) {
        for (const key in defaultConfig) {
            /** @type {?} */
            const cloneDeep = JSON.parse(JSON.stringify(Object.assign({}, config[variableKey], { [key]: ((/** @type {?} */ (defaultConfig)))[key] })));
            config[variableKey] = config[variableKey].hasOwnProperty(key) ? config[variableKey] : cloneDeep;
        }
        return config[variableKey];
    }
    else {
        return defaultConfig;
    }
});
/**
 * Rxjs complete
 * \@param as
 * \@param data
 * \@param error
 * @type {?}
 */
export const AS_COMPLETE = (/**
 * @param {?} as
 * @param {?} data
 * @param {?=} error
 * @return {?}
 */
(as, data, error = null) => {
    error ? as.error(error) : as.next(data);
    as.complete();
});
/**
 * CAMERA_BEEP
 * \@param isPlay
 * \@return
 * @type {?}
 */
export const PLAY_AUDIO = (/**
 * @param {?=} isPlay
 * @return {?}
 */
(isPlay = false) => {
    if (isPlay === false)
        return;
    /** @type {?} */
    const audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU' + Array(300).join('101'));
    // when the sound has been loaded, execute your code
    audio.oncanplaythrough = (/**
     * @return {?}
     */
    () => {
        /** @type {?} */
        const promise = audio.play();
        if (promise) {
            promise.catch((/**
             * @param {?} e
             * @return {?}
             */
            (e) => {
                if (e.name === "NotAllowedError" || e.name === "NotSupportedError") {
                    // console.log(e.name);
                }
            }));
        }
    });
});
/**
 * HAS_OWN_PROPERTY
 * Fix issue vs ng v 6-7-8
 * Optional chaining (?.) just have on ng v 9++
 * eg: HAS_OWN_PROPERTY(config, 'frameOptions.style') // output: boolean
 * \@param obj
 * \@param propertyPath
 * \@return
 * @type {?}
 */
export const HAS_OWN_PROPERTY = (/**
 * @param {?} obj
 * @param {?} propertyPath
 * @return {?}
 */
(obj, propertyPath) => {
    /** @type {?} */
    const properties = propertyPath.split(".");
    for (let i = 0; i < properties.length; i++) {
        /** @type {?} */
        let prop = properties[i];
        if (!obj.hasOwnProperty(prop)) {
            return false;
        }
        else {
            obj = obj[prop];
        }
    }
    return true;
});
/**
 * DRAW_RESULT_APPEND_CHILD
 * \@param code
 * \@param oriCanvas
 * \@param elTarget
 * @type {?}
 */
export const DRAW_RESULT_APPEND_CHILD = (/**
 * @param {?} code
 * @param {?} oriCanvas
 * @param {?} elTarget
 * @return {?}
 */
(code, oriCanvas, elTarget) => {
    /** @type {?} */
    let widthZoom;
    /** @type {?} */
    let heightZoom;
    /** @type {?} */
    let oriWidth = oriCanvas.width;
    /** @type {?} */
    let oriHeight = oriCanvas.height;
    /** @type {?} */
    let oriWHRatio = oriWidth / oriHeight;
    /** @type {?} */
    let imgWidth = parseInt(getComputedStyle(oriCanvas).width);
    /** @type {?} */
    let imgHeight = parseInt(getComputedStyle(oriCanvas).height);
    /** @type {?} */
    let imgWHRatio = imgWidth / imgHeight;
    elTarget.innerHTML = '';
    if (oriWHRatio > imgWHRatio) {
        widthZoom = imgWidth / oriWidth;
        heightZoom = imgWidth / oriWHRatio / oriHeight;
    }
    else {
        heightZoom = imgHeight / oriHeight;
        widthZoom = (imgHeight * oriWHRatio) / oriWidth;
    }
    for (let i = 0; i < code.length; i++) {
        /** @type {?} */
        const _code = code[i];
        // New canvas
        /** @type {?} */
        let cvs = document.createElement("canvas");
        /** @type {?} */
        let ctx = (/** @type {?} */ (cvs.getContext('2d', { willReadFrequently: true })));
        /** @type {?} */
        let loc = {};
        /** @type {?} */
        let X = [];
        /** @type {?} */
        let Y = [];
        // Point x,y
        /** @type {?} */
        const points = _code.points;
        for (let j = 0; j < points.length; j++) {
            /** @type {?} */
            const xj = HAS_OWN_PROPERTY(points, `${j}.x`) ? points[j].x : 0;
            /** @type {?} */
            const yj = HAS_OWN_PROPERTY(points, `${j}.y`) ? points[j].y : 0;
            loc[`x${j + 1}`] = xj;
            loc[`y${j + 1}`] = yj;
            X.push(xj);
            Y.push(yj);
        }
        // Min max
        /** @type {?} */
        let maxX = Math.max(...X);
        /** @type {?} */
        let minX = Math.min(...X);
        /** @type {?} */
        let maxY = Math.max(...Y);
        /** @type {?} */
        let minY = Math.min(...Y);
        // Add class
        cvs.setAttribute('class', 'qrcode-polygon');
        // Size with screen zoom
        if (oriWHRatio > imgWHRatio) {
            cvs.style.top = minY * heightZoom + (imgHeight - imgWidth / oriWHRatio) * 0.5 + "px";
            cvs.style.left = minX * widthZoom + "px";
            cvs.width = (maxX - minX) * widthZoom;
            cvs.height = (maxY - minY) * widthZoom;
        }
        else {
            cvs.style.top = minY * heightZoom + "px";
            cvs.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
            cvs.width = (maxX - minX) * heightZoom;
            cvs.height = (maxY - minY) * heightZoom;
        }
        // Style for canvas
        ctx.lineWidth = 1;
        ctx.strokeStyle = 'green';
        ctx.fillStyle = "#55f02880";
        // polygon [x,y, x,y, x,y.....];
        /** @type {?} */
        const polygon = [];
        for (let k = 0; k < X.length; k++) {
            polygon.push((loc[`x${k + 1}`] - minX) * heightZoom);
            polygon.push((loc[`y${k + 1}`] - minY) * widthZoom);
        }
        // Copy array
        /** @type {?} */
        const shape = (/** @type {?} */ (polygon.slice(0)));
        // Draw polygon
        ctx.beginPath();
        ctx.moveTo(shape.shift(), shape.shift());
        while (shape.length) {
            ctx.lineTo(shape.shift(), shape.shift()); //x,y
        }
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        // Tooltip result
        /** @type {?} */
        const qrcodeTooltipTemp = document.createElement('div');
        qrcodeTooltipTemp.setAttribute('class', 'qrcode-tooltip-temp');
        qrcodeTooltipTemp.innerText = _code.value;
        // Tooltip box
        /** @type {?} */
        const qrcodeTooltip = document.createElement('div');
        qrcodeTooltip.setAttribute('class', 'qrcode-tooltip');
        qrcodeTooltip.appendChild(qrcodeTooltipTemp);
        heightZoom = imgHeight / oriHeight;
        widthZoom = (imgHeight * oriWHRatio) / oriWidth;
        qrcodeTooltip.style.fontSize = widthZoom * 15 + 'px';
        qrcodeTooltip.style.top = minY * heightZoom + "px";
        qrcodeTooltip.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
        qrcodeTooltip.style.width = (maxX - minX) * heightZoom + "px";
        qrcodeTooltip.style.height = (maxY - minY) * heightZoom + "px";
        // Result text
        /** @type {?} */
        const resultText = document.createElement('span');
        resultText.innerText = _code.value;
        resultText.style.fontSize = widthZoom * 13 + 'px';
        // Set position result text
        resultText.style.top = minY * heightZoom + (-20 * heightZoom) + "px";
        resultText.style.left = minX * widthZoom + (imgWidth - imgHeight * oriWHRatio) * 0.5 + "px";
        if (elTarget) {
            elTarget.appendChild(qrcodeTooltip);
            elTarget.appendChild(resultText);
            elTarget.appendChild(cvs);
        }
    }
    ;
})
/**
 * DRAW_RESULT_ON_CANVAS
 * @param code
 * @param cvs
 */
;
/**
 * DRAW_RESULT_ON_CANVAS
 * \@param code
 * \@param cvs
 * @type {?}
 */
export const DRAW_RESULT_ON_CANVAS = (/**
 * @param {?} code
 * @param {?} cvs
 * @return {?}
 */
(code, cvs) => {
    /** @type {?} */
    let ctx = (/** @type {?} */ (cvs.getContext('2d', { willReadFrequently: true })));
    for (let i = 0; i < code.length; i++) {
        /** @type {?} */
        const _code = code[i];
        /** @type {?} */
        let loc = {};
        /** @type {?} */
        let X = [];
        /** @type {?} */
        let Y = [];
        // Point x,y
        /** @type {?} */
        const points = _code.points;
        for (let j = 0; j < points.length; j++) {
            /** @type {?} */
            const xj = HAS_OWN_PROPERTY(points, `${j}.x`) ? points[j].x : 0;
            /** @type {?} */
            const yj = HAS_OWN_PROPERTY(points, `${j}.y`) ? points[j].y : 0;
            loc[`x${j + 1}`] = xj;
            loc[`y${j + 1}`] = yj;
            X.push(xj);
            Y.push(yj);
        }
        // Min max
        /** @type {?} */
        let minX = Math.min(...X);
        /** @type {?} */
        let minY = Math.min(...Y);
        // Style for canvas
        ctx.lineWidth = 1;
        ctx.strokeStyle = 'green';
        ctx.fillStyle = "#55f02880";
        ctx.font = "15px serif";
        FILL_TEXT_MULTI_LINE(ctx, _code.value, minX, minY - 5);
        // polygon [x,y, x,y, x,y.....];
        /** @type {?} */
        const polygon = [];
        for (let k = 0; k < X.length; k++) {
            polygon.push(loc[`x${k + 1}`]);
            polygon.push(loc[`y${k + 1}`]);
        }
        // Copy array
        /** @type {?} */
        const shape = (/** @type {?} */ (polygon.slice(0)));
        // Draw polygon
        ctx.beginPath();
        ctx.moveTo(shape.shift(), shape.shift());
        while (shape.length) {
            ctx.lineTo(shape.shift(), shape.shift()); //x,y
        }
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
    }
    ;
})
/**
 * READ_AS_DATA_URL
 * @param file
 * @param config
 * @return Promise
 */
;
/**
 * READ_AS_DATA_URL
 * \@param file
 * \@param config
 * \@return Promise
 * @type {?}
 */
export const READ_AS_DATA_URL = (/**
 * @param {?} file
 * @param {?} config
 * @return {?}
 */
(file, config) => {
    /**
     * overrides *
     * @type {?}
     */
    let decode = HAS_OWN_PROPERTY(config, 'decode') ? config.decode : CONFIG_DEFAULT.decode;
    /** drawImage **/
    return new Promise((/**
     * @param {?} resolve
     * @param {?} reject
     * @return {?}
     */
    (resolve, reject) => {
        /** @type {?} */
        const fileReader = new FileReader();
        fileReader.onload = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const objectFile = {
                name: file.name,
                file: file,
                url: URL.createObjectURL(file)
            };
            // Set the src of this Image object.
            /** @type {?} */
            const image = new Image();
            // Setting cross origin value to anonymous
            image.setAttribute('crossOrigin', 'anonymous');
            // When our image has loaded.
            image.onload = (/**
             * @return {?}
             */
            () => tslib_1.__awaiter(this, void 0, void 0, function* () {
                // Get the canvas element by using the getElementById method.
                /** @type {?} */
                const canvas = document.createElement('canvas');
                // HTMLImageElement size
                canvas.width = image.naturalWidth || image.width;
                canvas.height = image.naturalHeight || image.height;
                // Get a 2D drawing context for the canvas.
                /** @type {?} */
                const ctx = (/** @type {?} */ (canvas.getContext('2d')));
                // Draw image
                ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                // Data image
                /** @type {?} */
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                // Scanner
                /** @type {?} */
                const code = yield zbarWasm.scanImageData(imageData);
                if (code && code.length) {
                    // Decode
                    code.forEach((/**
                     * @param {?} s
                     * @return {?}
                     */
                    (s) => s.value = s.decode(decode && decode.toLocaleLowerCase())));
                    // Overlay
                    DRAW_RESULT_ON_CANVAS(code, canvas);
                    // Emit object
                    /** @type {?} */
                    const blob = yield CANVAS_TO_BLOB(canvas);
                    /** @type {?} */
                    const url = URL.createObjectURL(blob);
                    /** @type {?} */
                    const blobToFile = (/**
                     * @param {?} theBlob
                     * @param {?} fileName
                     * @return {?}
                     */
                    (theBlob, fileName) => new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type }));
                    resolve(Object.assign({}, objectFile, { data: code, url: url, canvas: canvas, file: blobToFile(blob, objectFile.name) }));
                }
                else {
                    resolve(Object.assign({}, objectFile, { data: code, canvas: canvas }));
                }
            }));
            // Set src
            image.src = objectFile.url;
        });
        fileReader.onerror = (/**
         * @param {?} error
         * @return {?}
         */
        (error) => reject(error));
        fileReader.readAsDataURL(file);
    }));
})
/**
 * Convert canvas to blob
 * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality
 * @param canvas
 * @param type
 * @return Promise
 */
;
/**
 * Convert canvas to blob
 * canvas.toBlob((blob) => { .. }, 'image/jpeg', 0.95); // JPEG at 95% quality
 * \@param canvas
 * \@param type
 * \@return Promise
 * @type {?}
 */
export const CANVAS_TO_BLOB = (/**
 * @param {?} canvas
 * @param {?=} type
 * @return {?}
 */
(canvas, type) => {
    return new Promise((/**
     * @param {?} resolve
     * @param {?} reject
     * @return {?}
     */
    (resolve, reject) => canvas.toBlob((/**
     * @param {?} blob
     * @return {?}
     */
    blob => resolve(blob)), type)));
})
/**
 * Convert blob to file
 * @param theBlob
 * @param fileName
 * @return File
 */
;
/**
 * Convert blob to file
 * \@param theBlob
 * \@param fileName
 * \@return File
 * @type {?}
 */
export const BLOB_TO_FILE = (/**
 * @param {?} theBlob
 * @param {?} fileName
 * @return {?}
 */
(theBlob, fileName) => {
    return new File([theBlob], fileName, { lastModified: new Date().getTime(), type: theBlob.type });
})
/**
 * FILES_TO_SCAN
 * @param files
 * @return AsyncSubject
 */
;
/**
 * FILES_TO_SCAN
 * \@param files
 * \@return AsyncSubject
 * @type {?}
 */
export const FILES_TO_SCAN = (/**
 * @param {?=} files
 * @param {?=} configs
 * @param {?=} as
 * @return {?}
 */
(files = [], configs, as = new AsyncSubject()) => {
    Promise.all(Object.assign([], files).map((/**
     * @param {?} m
     * @return {?}
     */
    m => READ_AS_DATA_URL(m, configs)))).then((/**
     * @param {?} img
     * @return {?}
     */
    (img) => AS_COMPLETE(as, img))).catch((/**
     * @param {?} error
     * @return {?}
     */
    (error) => AS_COMPLETE(as, null, error)));
    return as;
})
/**
 * FILL_TEXT_MULTI_LINE
 * @param ctx
 * @param text
 * @param x
 * @param y
 */
;
/**
 * FILL_TEXT_MULTI_LINE
 * \@param ctx
 * \@param text
 * \@param x
 * \@param y
 * @type {?}
 */
export const FILL_TEXT_MULTI_LINE = (/**
 * @param {?} ctx
 * @param {?} text
 * @param {?} x
 * @param {?} y
 * @return {?}
 */
(ctx, text, x, y) => {
    /** @type {?} */
    let lineHeight = ctx.measureText("M").width * 1.2;
    /** @type {?} */
    let lines = text.split("\n");
    for (var i = 0; i < lines.length; ++i) {
        ctx.fillText(lines[i], x, y);
        ctx.strokeText(lines[i], x, y);
        y += lineHeight;
    }
})
/**
 * VIBRATE
 * Bật rung trên mobile
 * @param time
 */
;
/**
 * VIBRATE
 * Bật rung trên mobile
 * \@param time
 * @type {?}
 */
export const VIBRATE = (/**
 * @param {?} time
 * @return {?}
 */
(time) => {
    time && IS_MOBILE() && window.navigator.vibrate(time);
});
/**
 * IS_MOBILE
 * \@return
 * @type {?}
 */
export const IS_MOBILE = (/**
 * @return {?}
 */
() => {
    /** @type {?} */
    const vendor = navigator.userAgent || navigator['vendor'] || window['opera'];
    return !!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(vendor) ||
        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(vendor.substr(0, 4)));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNjYW5uZXItcXJjb2RlLmhlbHBlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1zY2FubmVyLXFyY29kZS8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtc2Nhbm5lci1xcmNvZGUuaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwQyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sOEJBQThCLENBQUM7Ozs7Ozs7OztBQVc5RCxNQUFNLE9BQU8sU0FBUzs7Ozs7O0FBQUcsQ0FBQyxXQUFtQixFQUFFLE1BQVcsRUFBRSxhQUFrQixFQUFFLEVBQUU7SUFDaEYsSUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7UUFDckQsS0FBSyxNQUFNLEdBQUcsSUFBSSxhQUFhLEVBQUU7O2tCQUN6QixTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxtQkFBTSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsbUJBQUEsYUFBYSxFQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFHLENBQUM7WUFDbkgsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1NBQ2pHO1FBQ0QsT0FBTyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDNUI7U0FBTTtRQUNMLE9BQU8sYUFBYSxDQUFDO0tBQ3RCO0FBQ0gsQ0FBQyxDQUFBOzs7Ozs7OztBQVFELE1BQU0sT0FBTyxXQUFXOzs7Ozs7QUFBRyxDQUFDLEVBQXFCLEVBQUUsSUFBUyxF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LFNBQVMsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUM1RSxPQUFPLENBQUMsQ0FBQyxDQUNQLHFWQUFxVixDQUFDLElBQUksQ0FDeFYsTUFBTSxDQUNQO1FBQ0QsMmhEQUEyaEQsQ0FBQyxJQUFJLENBQzloRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FDcEIsQ0FDRixDQUFDO0FBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHsgQ09ORklHX0RFRkFVTFQgfSBmcm9tIFwiLi9uZ3gtc2Nhbm5lci1xcmNvZGUuZGVmYXVsdFwiO1xyXG5pbXBvcnQgeyBTY2FubmVyUVJDb2RlQ29uZmlnLCBTY2FubmVyUVJDb2RlU2VsZWN0ZWRGaWxlcyB9IGZyb20gXCIuL25neC1zY2FubmVyLXFyY29kZS5vcHRpb25zXCI7XHJcbmRlY2xhcmUgY29uc3QgemJhcldhc206IGFueTtcclxuXHJcbi8qKlxyXG4gKiBPVkVSUklERVNcclxuICogQHBhcmFtIHZhcmlhYmxlS2V5IFxyXG4gKiBAcGFyYW0gY29uZmlnIFxyXG4gKiBAcGFyYW0gZGVmYXVsdENvbmZpZyBcclxuICogQHJldHVybnMgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgT1ZFUlJJREVTID0gKHZhcmlhYmxlS2V5OiBzdHJpbmcsIGNvbmZpZzogYW55LCBkZWZhdWx0Q29uZmlnOiBhbnkpID0+IHtcclxuICBpZiAoY29uZmlnICYmIE9iamVjdC5rZXlzKGNvbmZpZ1t2YXJpYWJsZUtleV0pLmxlbmd0aCkge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGVmYXVsdENvbmZpZykge1xyXG4gICAgICBjb25zdCBjbG9uZURlZXAgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHsgLi4uY29uZmlnW3ZhcmlhYmxlS2V5XSwgLi4ueyBba2V5XTogKGRlZmF1bHRDb25maWcgYXMgYW55KVtrZXldIH0gfSkpO1xyXG4gICAgICBjb25maWdbdmFyaWFibGVLZXldID0gY29uZmlnW3ZhcmlhYmxlS2V5XS5oYXNPd25Qcm9wZXJ0eShrZXkpID8gY29uZmlnW3ZhcmlhYmxlS2V5XSA6IGNsb25lRGVlcDtcclxuICAgIH1cclxuICAgIHJldHVybiBjb25maWdbdmFyaWFibGVLZXldO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZGVmYXVsdENvbmZpZztcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUnhqcyBjb21wbGV0ZVxyXG4gKiBAcGFyYW0gYXNcclxuICogQHBhcmFtIGRhdGFcclxuICogQHBhcmFtIGVycm9yXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQVNfQ09NUExFVEUgPSAoYXM6IEFzeW5jU3ViamVjdDxhbnk+LCBkYXRhOiBhbnksIGVycm9yID0gbnVsbCkgPT4ge1xyXG4gIGVycm9yID8gYXMuZXJyb3IoZXJyb3IpIDogYXMubmV4dChkYXRhKTtcclxuICBhcy5jb21wbGV0ZSgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENBTUVSQV9CRUVQXHJcbiAqIEBwYXJhbSBpc1BsYXkgXHJcbiAqIEByZXR1cm5zIFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFBMQVlfQVVESU8gPSAoaXNQbGF5OiBib29sZWFuID0gZmFsc2UpID0+IHtcclxuICBpZiAoaXNQbGF5ID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKCdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JsOXZUMTlYUVZaRlptMTBJQkFBQUFBQkFBRUFRQjhBQUVBZkFBQUJBQWdBWkdGMFlVJyArIEFycmF5KDMwMCkuam9pbignMTAxJykpO1xyXG4gIC8vIHdoZW4gdGhlIHNvdW5kIGhhcyBiZWVuIGxvYWRlZCwgZXhlY3V0ZSB5b3VyIGNvZGVcclxuICBhdWRpby5vbmNhbnBsYXl0aHJvdWdoID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcHJvbWlzZSA9IGF1ZGlvLnBsYXkoKTtcclxuICAgIGlmIChwcm9taXNlKSB7XHJcbiAgICAgIHByb21pc2UuY2F0Y2goKGUpID0+IHtcclxuICAgICAgICBpZiAoZS5uYW1lID09PSBcIk5vdEFsbG93ZWRFcnJvclwiIHx8IGUubmFtZSA9PT0gXCJOb3RTdXBwb3J0ZWRFcnJvclwiKSB7XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBIQVNfT1dOX1BST1BFUlRZXHJcbiAqIEZpeCBpc3N1ZSB2cyBuZyB2IDYtNy04XHJcbiAqIE9wdGlvbmFsIGNoYWluaW5nICg/LikganVzdCBoYXZlIG9uIG5nIHYgOSsrXHJcbiAqIGVnOiBIQVNfT1dOX1BST1BFUlRZKGNvbmZpZywgJ2ZyYW1lT3B0aW9ucy5zdHlsZScpIC8vIG91dHB1dDogYm9vbGVhblxyXG4gKiBAcGFyYW0gb2JqIFxyXG4gKiBAcGFyYW0gcHJvcGVydHlQYXRoIFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmV4cG9ydCBjb25zdCBIQVNfT1dOX1BST1BFUlRZID0gKG9iajogYW55LCBwcm9wZXJ0eVBhdGg6IHN0cmluZykgPT4ge1xyXG4gIGNvbnN0IHByb3BlcnRpZXMgPSBwcm9wZXJ0eVBhdGguc3BsaXQoXCIuXCIpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IHByb3AgPSBwcm9wZXJ0aWVzW2ldO1xyXG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb2JqID0gb2JqW3Byb3BdO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBEUkFXX1JFU1VMVF9BUFBFTkRfQ0hJTERcclxuICogQHBhcmFtIGNvZGUgXHJcbiAqIEBwYXJhbSBvcmlDYW52YXMgXHJcbiAqIEBwYXJhbSBlbFRhcmdldCBcclxuICovXHJcbmV4cG9ydCBjb25zdCBEUkFXX1JFU1VMVF9BUFBFTkRfQ0hJTEQgPSAoY29kZTogYW55W10sIG9yaUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIGVsVGFyZ2V0OiBIVE1MQ2FudmFzRWxlbWVudCB8IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgbGV0IHdpZHRoWm9vbTtcclxuICBsZXQgaGVpZ2h0Wm9vbTtcclxuICBsZXQgb3JpV2lkdGggPSBvcmlDYW52YXMud2lkdGg7XHJcbiAgbGV0IG9yaUhlaWdodCA9IG9yaUNhbnZhcy5oZWlnaHQ7XHJcbiAgbGV0IG9yaVdIUmF0aW8gPSBvcmlXaWR0aCAvIG9yaUhlaWdodDtcclxuICBsZXQgaW1nV2lkdGggPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKG9yaUNhbnZhcykud2lkdGgpO1xyXG4gIGxldCBpbWdIZWlnaHQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKG9yaUNhbnZhcykuaGVpZ2h0KTtcclxuICBsZXQgaW1nV0hSYXRpbyA9IGltZ1dpZHRoIC8gaW1nSGVpZ2h0O1xyXG4gIGVsVGFyZ2V0LmlubmVySFRNTCA9ICcnO1xyXG5cclxuICBpZiAob3JpV0hSYXRpbyA+IGltZ1dIUmF0aW8pIHtcclxuICAgIHdpZHRoWm9vbSA9IGltZ1dpZHRoIC8gb3JpV2lkdGg7XHJcbiAgICBoZWlnaHRab29tID0gaW1nV2lkdGggLyBvcmlXSFJhdGlvIC8gb3JpSGVpZ2h0O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoZWlnaHRab29tID0gaW1nSGVpZ2h0IC8gb3JpSGVpZ2h0O1xyXG4gICAgd2lkdGhab29tID0gKGltZ0hlaWdodCAqIG9yaVdIUmF0aW8pIC8gb3JpV2lkdGg7XHJcbiAgfVxyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvZGUubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IF9jb2RlID0gY29kZVtpXTtcclxuICAgIC8vIE5ldyBjYW52YXNcclxuICAgIGxldCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgbGV0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCcyZCcsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGxldCBsb2M6IGFueSA9IHt9O1xyXG4gICAgbGV0IFg6IGFueSA9IFtdO1xyXG4gICAgbGV0IFk6IGFueSA9IFtdO1xyXG5cclxuICAgIC8vIFBvaW50IHgseVxyXG4gICAgY29uc3QgcG9pbnRzID0gX2NvZGUucG9pbnRzO1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBwb2ludHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgY29uc3QgeGogPSBIQVNfT1dOX1BST1BFUlRZKHBvaW50cywgYCR7an0ueGApID8gcG9pbnRzW2pdLnggOiAwO1xyXG4gICAgICBjb25zdCB5aiA9IEhBU19PV05fUFJPUEVSVFkocG9pbnRzLCBgJHtqfS55YCkgPyBwb2ludHNbal0ueSA6IDA7XHJcbiAgICAgIGxvY1tgeCR7aiArIDF9YF0gPSB4ajtcclxuICAgICAgbG9jW2B5JHtqICsgMX1gXSA9IHlqO1xyXG4gICAgICBYLnB1c2goeGopO1xyXG4gICAgICBZLnB1c2goeWopO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1pbiBtYXhcclxuICAgIGxldCBtYXhYID0gTWF0aC5tYXgoLi4uWCk7XHJcbiAgICBsZXQgbWluWCA9IE1hdGgubWluKC4uLlgpO1xyXG4gICAgbGV0IG1heFkgPSBNYXRoLm1heCguLi5ZKTtcclxuICAgIGxldCBtaW5ZID0gTWF0aC5taW4oLi4uWSk7XHJcblxyXG4gICAgLy8gQWRkIGNsYXNzXHJcbiAgICBjdnMuc2V0QXR0cmlidXRlKCdjbGFzcycsICdxcmNvZGUtcG9seWdvbicpO1xyXG5cclxuICAgIC8vIFNpemUgd2l0aCBzY3JlZW4gem9vbVxyXG4gICAgaWYgKG9yaVdIUmF0aW8gPiBpbWdXSFJhdGlvKSB7XHJcbiAgICAgIGN2cy5zdHlsZS50b3AgPSBtaW5ZICogaGVpZ2h0Wm9vbSArIChpbWdIZWlnaHQgLSBpbWdXaWR0aCAvIG9yaVdIUmF0aW8pICogMC41ICsgXCJweFwiO1xyXG4gICAgICBjdnMuc3R5bGUubGVmdCA9IG1pblggKiB3aWR0aFpvb20gKyBcInB4XCI7XHJcbiAgICAgIGN2cy53aWR0aCA9IChtYXhYIC0gbWluWCkgKiB3aWR0aFpvb207XHJcbiAgICAgIGN2cy5oZWlnaHQgPSAobWF4WSAtIG1pblkpICogd2lkdGhab29tO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3ZzLnN0eWxlLnRvcCA9IG1pblkgKiBoZWlnaHRab29tICsgXCJweFwiO1xyXG4gICAgICBjdnMuc3R5bGUubGVmdCA9IG1pblggKiB3aWR0aFpvb20gKyAoaW1nV2lkdGggLSBpbWdIZWlnaHQgKiBvcmlXSFJhdGlvKSAqIDAuNSArIFwicHhcIjtcclxuICAgICAgY3ZzLndpZHRoID0gKG1heFggLSBtaW5YKSAqIGhlaWdodFpvb207XHJcbiAgICAgIGN2cy5oZWlnaHQgPSAobWF4WSAtIG1pblkpICogaGVpZ2h0Wm9vbTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdHlsZSBmb3IgY2FudmFzXHJcbiAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdncmVlbic7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjNTVmMDI4ODBcIjtcclxuXHJcbiAgICAvLyBwb2x5Z29uIFt4LHksIHgseSwgeCx5Li4uLi5dO1xyXG4gICAgY29uc3QgcG9seWdvbiA9IFtdO1xyXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCBYLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgIHBvbHlnb24ucHVzaCgobG9jW2B4JHtrICsgMX1gXSAtIG1pblgpICogaGVpZ2h0Wm9vbSk7XHJcbiAgICAgIHBvbHlnb24ucHVzaCgobG9jW2B5JHtrICsgMX1gXSAtIG1pblkpICogd2lkdGhab29tKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb3B5IGFycmF5XHJcbiAgICBjb25zdCBzaGFwZSA9IHBvbHlnb24uc2xpY2UoMCkgYXMgYW55O1xyXG5cclxuICAgIC8vIERyYXcgcG9seWdvblxyXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgY3R4Lm1vdmVUbyhzaGFwZS5zaGlmdCgpLCBzaGFwZS5zaGlmdCgpKTtcclxuICAgIHdoaWxlIChzaGFwZS5sZW5ndGgpIHtcclxuICAgICAgY3R4LmxpbmVUbyhzaGFwZS5zaGlmdCgpLCBzaGFwZS5zaGlmdCgpKTsgLy94LHlcclxuICAgIH1cclxuICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgIGN0eC5maWxsKCk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgLy8gVG9vbHRpcCByZXN1bHRcclxuICAgIGNvbnN0IHFyY29kZVRvb2x0aXBUZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBxcmNvZGVUb29sdGlwVGVtcC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3FyY29kZS10b29sdGlwLXRlbXAnKTtcclxuICAgIHFyY29kZVRvb2x0aXBUZW1wLmlubmVyVGV4dCA9IF9jb2RlLnZhbHVlO1xyXG5cclxuICAgIC8vIFRvb2x0aXAgYm94XHJcbiAgICBjb25zdCBxcmNvZGVUb29sdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBxcmNvZGVUb29sdGlwLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncXJjb2RlLXRvb2x0aXAnKTtcclxuICAgIHFyY29kZVRvb2x0aXAuYXBwZW5kQ2hpbGQocXJjb2RlVG9vbHRpcFRlbXApO1xyXG4gICAgaGVpZ2h0Wm9vbSA9IGltZ0hlaWdodCAvIG9yaUhlaWdodDtcclxuICAgIHdpZHRoWm9vbSA9IChpbWdIZWlnaHQgKiBvcmlXSFJhdGlvKSAvIG9yaVdpZHRoO1xyXG4gICAgcXJjb2RlVG9vbHRpcC5zdHlsZS5mb250U2l6ZSA9IHdpZHRoWm9vbSAqIDE1ICsgJ3B4JztcclxuICAgIHFyY29kZVRvb2x0aXAuc3R5bGUudG9wID0gbWluWSAqIGhlaWdodFpvb20gKyBcInB4XCI7XHJcbiAgICBxcmNvZGVUb29sdGlwLnN0eWxlLmxlZnQgPSBtaW5YICogd2lkdGhab29tICsgKGltZ1dpZHRoIC0gaW1nSGVpZ2h0ICogb3JpV0hSYXRpbykgKiAwLjUgKyBcInB4XCI7XHJcbiAgICBxcmNvZGVUb29sdGlwLnN0eWxlLndpZHRoID0gKG1heFggLSBtaW5YKSAqIGhlaWdodFpvb20gKyBcInB4XCI7XHJcbiAgICBxcmNvZGVUb29sdGlwLnN0eWxlLmhlaWdodCA9IChtYXhZIC0gbWluWSkgKiBoZWlnaHRab29tICsgXCJweFwiO1xyXG5cclxuICAgIC8vIFJlc3VsdCB0ZXh0XHJcbiAgICBjb25zdCByZXN1bHRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgcmVzdWx0VGV4dC5pbm5lclRleHQgPSBfY29kZS52YWx1ZTtcclxuICAgIHJlc3VsdFRleHQuc3R5bGUuZm9udFNpemUgPSB3aWR0aFpvb20gKiAxMyArICdweCc7XHJcblxyXG4gICAgLy8gU2V0IHBvc2l0aW9uIHJlc3VsdCB0ZXh0XHJcbiAgICByZXN1bHRUZXh0LnN0eWxlLnRvcCA9IG1pblkgKiBoZWlnaHRab29tICsgKC0yMCAqIGhlaWdodFpvb20pICsgXCJweFwiO1xyXG4gICAgcmVzdWx0VGV4dC5zdHlsZS5sZWZ0ID0gbWluWCAqIHdpZHRoWm9vbSArIChpbWdXaWR0aCAtIGltZ0hlaWdodCAqIG9yaVdIUmF0aW8pICogMC41ICsgXCJweFwiO1xyXG5cclxuICAgIGlmIChlbFRhcmdldCkge1xyXG4gICAgICBlbFRhcmdldC5hcHBlbmRDaGlsZChxcmNvZGVUb29sdGlwKTtcclxuICAgICAgZWxUYXJnZXQuYXBwZW5kQ2hpbGQocmVzdWx0VGV4dCk7XHJcbiAgICAgIGVsVGFyZ2V0LmFwcGVuZENoaWxkKGN2cyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEUkFXX1JFU1VMVF9PTl9DQU5WQVNcclxuICogQHBhcmFtIGNvZGUgXHJcbiAqIEBwYXJhbSBjdnMgXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgRFJBV19SRVNVTFRfT05fQ0FOVkFTID0gKGNvZGU6IGFueVtdLCBjdnM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiB7XHJcbiAgbGV0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCcyZCcsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBfY29kZSA9IGNvZGVbaV07XHJcbiAgICBsZXQgbG9jOiBhbnkgPSB7fTtcclxuICAgIGxldCBYOiBhbnkgPSBbXTtcclxuICAgIGxldCBZOiBhbnkgPSBbXTtcclxuXHJcbiAgICAvLyBQb2ludCB4LHlcclxuICAgIGNvbnN0IHBvaW50cyA9IF9jb2RlLnBvaW50cztcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGNvbnN0IHhqID0gSEFTX09XTl9QUk9QRVJUWShwb2ludHMsIGAke2p9LnhgKSA/IHBvaW50c1tqXS54IDogMDtcclxuICAgICAgY29uc3QgeWogPSBIQVNfT1dOX1BST1BFUlRZKHBvaW50cywgYCR7an0ueWApID8gcG9pbnRzW2pdLnkgOiAwO1xyXG4gICAgICBsb2NbYHgke2ogKyAxfWBdID0geGo7XHJcbiAgICAgIGxvY1tgeSR7aiArIDF9YF0gPSB5ajtcclxuICAgICAgWC5wdXNoKHhqKTtcclxuICAgICAgWS5wdXNoKHlqKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNaW4gbWF4XHJcbiAgICBsZXQgbWluWCA9IE1hdGgubWluKC4uLlgpO1xyXG4gICAgbGV0IG1pblkgPSBNYXRoLm1pbiguLi5ZKTtcclxuXHJcbiAgICAvLyBTdHlsZSBmb3IgY2FudmFzXHJcbiAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdncmVlbic7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gXCIjNTVmMDI4ODBcIjtcclxuICAgIGN0eC5mb250ID0gXCIxNXB4IHNlcmlmXCI7XHJcbiAgICBGSUxMX1RFWFRfTVVMVElfTElORShjdHgsIF9jb2RlLnZhbHVlLCBtaW5YLCBtaW5ZIC0gNSlcclxuXHJcbiAgICAvLyBwb2x5Z29uIFt4LHksIHgseSwgeCx5Li4uLi5dO1xyXG4gICAgY29uc3QgcG9seWdvbiA9IFtdO1xyXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCBYLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgIHBvbHlnb24ucHVzaChsb2NbYHgke2sgKyAxfWBdKTtcclxuICAgICAgcG9seWdvbi5wdXNoKGxvY1tgeSR7ayArIDF9YF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvcHkgYXJyYXlcclxuICAgIGNvbnN0IHNoYXBlID0gcG9seWdvbi5zbGljZSgwKSBhcyBhbnk7XHJcblxyXG4gICAgLy8gRHJhdyBwb2x5Z29uXHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubW92ZVRvKHNoYXBlLnNoaWZ0KCksIHNoYXBlLnNoaWZ0KCkpO1xyXG4gICAgd2hpbGUgKHNoYXBlLmxlbmd0aCkge1xyXG4gICAgICBjdHgubGluZVRvKHNoYXBlLnNoaWZ0KCksIHNoYXBlLnNoaWZ0KCkpOyAvL3gseVxyXG4gICAgfVxyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgY3R4LmZpbGwoKTtcclxuICAgIGN0eC5zdHJva2UoKTtcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogUkVBRF9BU19EQVRBX1VSTFxyXG4gKiBAcGFyYW0gZmlsZSBcclxuICogQHBhcmFtIGNvbmZpZyBcclxuICogQHJldHVybiBQcm9taXNlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgUkVBRF9BU19EQVRBX1VSTCA9IChmaWxlOiBGaWxlLCBjb25maWc6IFNjYW5uZXJRUkNvZGVDb25maWcpOiBQcm9taXNlPFNjYW5uZXJRUkNvZGVTZWxlY3RlZEZpbGVzPiA9PiB7XHJcbiAgLyoqIG92ZXJyaWRlcyAqKi9cclxuICBsZXQgZGVjb2RlID0gSEFTX09XTl9QUk9QRVJUWShjb25maWcsICdkZWNvZGUnKSA/IGNvbmZpZy5kZWNvZGUgOiBDT05GSUdfREVGQVVMVC5kZWNvZGU7XHJcblxyXG4gIC8qKiBkcmF3SW1hZ2UgKiovXHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgZmlsZVJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9iamVjdEZpbGUgPSB7XHJcbiAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgIGZpbGU6IGZpbGUsXHJcbiAgICAgICAgdXJsOiBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpXHJcbiAgICAgIH07XHJcbiAgICAgIC8vIFNldCB0aGUgc3JjIG9mIHRoaXMgSW1hZ2Ugb2JqZWN0LlxyXG4gICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAvLyBTZXR0aW5nIGNyb3NzIG9yaWdpbiB2YWx1ZSB0byBhbm9ueW1vdXNcclxuICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCdjcm9zc09yaWdpbicsICdhbm9ueW1vdXMnKTtcclxuICAgICAgLy8gV2hlbiBvdXIgaW1hZ2UgaGFzIGxvYWRlZC5cclxuICAgICAgaW1hZ2Uub25sb2FkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vIEdldCB0aGUgY2FudmFzIGVsZW1lbnQgYnkgdXNpbmcgdGhlIGdldEVsZW1lbnRCeUlkIG1ldGhvZC5cclxuICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICAvLyBIVE1MSW1hZ2VFbGVtZW50IHNpemVcclxuICAgICAgICBjYW52YXMud2lkdGggPSBpbWFnZS5uYXR1cmFsV2lkdGggfHwgaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGltYWdlLm5hdHVyYWxIZWlnaHQgfHwgaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgIC8vIEdldCBhIDJEIGRyYXdpbmcgY29udGV4dCBmb3IgdGhlIGNhbnZhcy5cclxuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICAgICAgLy8gRHJhdyBpbWFnZVxyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gRGF0YSBpbWFnZVxyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAvLyBTY2FubmVyXHJcbiAgICAgICAgY29uc3QgY29kZSA9IGF3YWl0IHpiYXJXYXNtLnNjYW5JbWFnZURhdGEoaW1hZ2VEYXRhKTtcclxuICAgICAgICBpZiAoY29kZSAmJiBjb2RlLmxlbmd0aCkge1xyXG4gICAgICAgICAgLy8gRGVjb2RlXHJcbiAgICAgICAgICBjb2RlLmZvckVhY2goKHM6IGFueSkgPT4gcy52YWx1ZSA9IHMuZGVjb2RlKGRlY29kZSAmJiBkZWNvZGUudG9Mb2NhbGVMb3dlckNhc2UoKSkpO1xyXG5cclxuICAgICAgICAgIC8vIE92ZXJsYXlcclxuICAgICAgICAgIERSQVdfUkVTVUxUX09OX0NBTlZBUyhjb2RlLCBjYW52YXMpO1xyXG5cclxuICAgICAgICAgIC8vIEVtaXQgb2JqZWN0XHJcbiAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgQ0FOVkFTX1RPX0JMT0IoY2FudmFzKTtcclxuICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgICAgICBjb25zdCBibG9iVG9GaWxlID0gKHRoZUJsb2I6IGFueSwgZmlsZU5hbWU6IHN0cmluZykgPT4gbmV3IEZpbGUoW3RoZUJsb2JdLCBmaWxlTmFtZSwgeyBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLCB0eXBlOiB0aGVCbG9iLnR5cGUgfSk7XHJcbiAgICAgICAgICByZXNvbHZlKE9iamVjdC5hc3NpZ24oe30sIG9iamVjdEZpbGUsIHsgZGF0YTogY29kZSwgdXJsOiB1cmwsIGNhbnZhczogY2FudmFzLCBmaWxlOiBibG9iVG9GaWxlKGJsb2IsIG9iamVjdEZpbGUubmFtZSkgfSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXNvbHZlKE9iamVjdC5hc3NpZ24oe30sIG9iamVjdEZpbGUsIHsgZGF0YTogY29kZSwgY2FudmFzOiBjYW52YXMgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgLy8gU2V0IHNyY1xyXG4gICAgICBpbWFnZS5zcmMgPSBvYmplY3RGaWxlLnVybDtcclxuICAgIH1cclxuICAgIGZpbGVSZWFkZXIub25lcnJvciA9IChlcnJvcjogYW55KSA9PiByZWplY3QoZXJyb3IpO1xyXG4gICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0IGNhbnZhcyB0byBibG9iXHJcbiAqIGNhbnZhcy50b0Jsb2IoKGJsb2IpID0+IHsgLi4gfSwgJ2ltYWdlL2pwZWcnLCAwLjk1KTsgLy8gSlBFRyBhdCA5NSUgcXVhbGl0eVxyXG4gKiBAcGFyYW0gY2FudmFzIFxyXG4gKiBAcGFyYW0gdHlwZSBcclxuICogQHJldHVybiBQcm9taXNlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgQ0FOVkFTX1RPX0JMT0IgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgdHlwZT86IHN0cmluZyk6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IGNhbnZhcy50b0Jsb2IoYmxvYiA9PiByZXNvbHZlKGJsb2IpLCB0eXBlKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0IGJsb2IgdG8gZmlsZVxyXG4gKiBAcGFyYW0gdGhlQmxvYiBcclxuICogQHBhcmFtIGZpbGVOYW1lIFxyXG4gKiBAcmV0dXJuIEZpbGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBCTE9CX1RPX0ZJTEUgPSAodGhlQmxvYjogYW55LCBmaWxlTmFtZTogc3RyaW5nKTogRmlsZSA9PiB7XHJcbiAgcmV0dXJuIG5ldyBGaWxlKFt0aGVCbG9iXSwgZmlsZU5hbWUsIHsgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgdHlwZTogdGhlQmxvYi50eXBlIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRklMRVNfVE9fU0NBTlxyXG4gKiBAcGFyYW0gZmlsZXMgXHJcbiAqIEByZXR1cm4gQXN5bmNTdWJqZWN0XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgRklMRVNfVE9fU0NBTiA9IChmaWxlczogRmlsZVtdID0gW10sIGNvbmZpZ3M6IFNjYW5uZXJRUkNvZGVDb25maWcsIGFzID0gbmV3IEFzeW5jU3ViamVjdDxTY2FubmVyUVJDb2RlU2VsZWN0ZWRGaWxlc1tdPigpKTogQXN5bmNTdWJqZWN0PFNjYW5uZXJRUkNvZGVTZWxlY3RlZEZpbGVzW10+ID0+IHtcclxuICBQcm9taXNlLmFsbChPYmplY3QuYXNzaWduKFtdLCBmaWxlcykubWFwKG0gPT4gUkVBRF9BU19EQVRBX1VSTChtLCBjb25maWdzKSkpLnRoZW4oKGltZzogU2Nhbm5lclFSQ29kZVNlbGVjdGVkRmlsZXNbXSkgPT4gQVNfQ09NUExFVEUoYXMsIGltZykpLmNhdGNoKChlcnJvcjogYW55KSA9PiBBU19DT01QTEVURShhcywgbnVsbCwgZXJyb3IpKTtcclxuICByZXR1cm4gYXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGSUxMX1RFWFRfTVVMVElfTElORVxyXG4gKiBAcGFyYW0gY3R4IFxyXG4gKiBAcGFyYW0gdGV4dCBcclxuICogQHBhcmFtIHggXHJcbiAqIEBwYXJhbSB5IFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IEZJTExfVEVYVF9NVUxUSV9MSU5FID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB0ZXh0OiBzdHJpbmcsIHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB7XHJcbiAgbGV0IGxpbmVIZWlnaHQgPSBjdHgubWVhc3VyZVRleHQoXCJNXCIpLndpZHRoICogMS4yO1xyXG4gIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xyXG4gICAgY3R4LmZpbGxUZXh0KGxpbmVzW2ldLCB4LCB5KTtcclxuICAgIGN0eC5zdHJva2VUZXh0KGxpbmVzW2ldLCB4LCB5KTtcclxuICAgIHkgKz0gbGluZUhlaWdodDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWSUJSQVRFXHJcbiAqIELhuq10IHJ1bmcgdHLDqm4gbW9iaWxlXHJcbiAqIEBwYXJhbSB0aW1lIFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IFZJQlJBVEUgPSAodGltZTogbnVtYmVyKSA9PiB7XHJcbiAgdGltZSAmJiBJU19NT0JJTEUoKSAmJiB3aW5kb3cubmF2aWdhdG9yLnZpYnJhdGUodGltZSk7XHJcbn07XHJcblxyXG4vKipcclxuICogSVNfTU9CSUxFXHJcbiAqIEByZXR1cm5zIFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IElTX01PQklMRSA9ICgpID0+IHtcclxuICBjb25zdCB2ZW5kb3IgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvclsndmVuZG9yJ10gfHwgd2luZG93WydvcGVyYSddO1xyXG4gIHJldHVybiAhIShcclxuICAgIC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfG9kKXxpcmlzfGtpbmRsZXxsZ2UgfG1hZW1vfG1pZHB8bW1wfG1vYmlsZS4rZmlyZWZveHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm98YW5kcm9pZHxpcGFkfHBsYXlib29rfHNpbGsvaS50ZXN0KFxyXG4gICAgICB2ZW5kb3JcclxuICAgICkgfHxcclxuICAgIC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3LShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtLXxjZWxsfGNodG18Y2xkY3xjbWQtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8LWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseSgtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmLTV8Zy1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkLShtfHB8dCl8aGVpLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzLWN8aHQoYygtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aS0oMjB8Z298bWEpfGkyMzB8aWFjKCB8LXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHwtW2Etd10pfGxpYnd8bHlueHxtMS13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bS1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dCgtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSktfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3wtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdC1nfHFhLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8LVsyLTddfGktKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aC18b298cC0pfHNka1xcL3xzZShjKC18MHwxKXw0N3xtY3xuZHxyaSl8c2doLXxzaGFyfHNpZSgtfG0pfHNrLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aC18di18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2wtfHRkZy18dGVsKGl8bSl8dGltLXx0LW1vfHRvKHBsfHNoKXx0cyg3MHxtLXxtM3xtNSl8dHgtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118LXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhcy18eW91cnx6ZXRvfHp0ZS0vaS50ZXN0KFxyXG4gICAgICB2ZW5kb3Iuc3Vic3RyKDAsIDQpXHJcbiAgICApXHJcbiAgKTtcclxufTsiXX0=