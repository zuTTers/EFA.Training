<mat-sidenav-container class="example-container" [hasBackdrop]="true">
    <mat-sidenav-content style="min-height: 80vh; margin-top: -8px;">
        <div class="ml-12 mr-12 mt-12 pb-20">

            <div fxLayout="row" fxLayoutGap="10">
                <div fxFlex="50%">
                    <!-- CUSTOMER SEARCH -->
                    <mat-card>
                        <mat-card-title>Ãœye Bilgisi</mat-card-title>
                        <mat-card-subtitle>Ãœye arayÄ±n veya yeni Ã¼ye ekleyin.</mat-card-subtitle>
                        <mat-card-content>
                            <fast-autocomplete [style.width.%]="100" placeholder="{{ 'DASHBOARD.SEARCHCUSTOMER' | translate }}"
                                               [initValue]="searchCustomerId" [endpoint]="'/Customer/GetListForCombo'"
                                               (onChange)="onChange($event)">
                            </fast-autocomplete>

                        </mat-card-content>
                        <mat-card-actions align="start">
                            <button mat-flat-button color="primary" (click)="newCustomerDialog()">Yeni Ãœye Ekle</button>
                            <!-- <button mat-flat-button color="primary" style="margin-left:15px;" (click)="newVaccinationDialog()">Yeni AÅŸÄ± Ekle</button> -->
                        </mat-card-actions>
                    </mat-card>
                    <!-- CUSTOMER & PATIENT INFO -->
                    <div fxLayout="row" fxLayoutGap="10" *ngIf="searchCustomerData">
                        <div fxFlex="60%">
                            <mat-card>
                                <mat-card-title>Ãœye Bilgileri</mat-card-title>
                                <mat-card-subtitle>
                                    Ãœye bilgilerini inceleyebilir veya dÃ¼zenleyebilirsiniz.
                                </mat-card-subtitle>
                                <mat-card-content>
                                    <mat-list role="list">
                                        <mat-list-item role="listitem">
                                            <b>AdÄ± SoyadÄ± : </b>&nbsp; {{searchCustomerData?.fullName}}
                                        </mat-list-item>
                                        <mat-list-item role="listitem">
                                            <b>Telefon No : </b>&nbsp; {{searchCustomerData?.phoneNumber}}
                                        </mat-list-item>
                                        <mat-list-item role="listitem">
                                            <b>Ãœye Tipi : </b>&nbsp; <mat-slide-toggle [(ngModel)]="searchCustomerData.customerType" disabled></mat-slide-toggle>
                                        </mat-list-item>
                                        <mat-list-item role="listitem">
                                            <b>Ã–deme YapÄ±ldÄ±? : </b>&nbsp; <mat-slide-toggle [(ngModel)]="searchCustomerData.isPaid" disabled></mat-slide-toggle>
                                        </mat-list-item>
                                        <mat-list-item role="listitem">
                                            <b>Ä°lk Sisteme GiriÅŸ : </b>&nbsp; {{searchCustomerData?.firstStartDate | date:'yyyy-MM-dd'}}
                                        </mat-list-item>
                                        <mat-list-item role="listitem">
                                            <b>Ãœyelik BaÅŸlangÄ±Ã§ - BitiÅŸ Tarihi : </b>&nbsp; {{searchCustomerData?.workingStartDate | date:'yyyy-MM-dd'}} - {{searchCustomerData?.workingEndDate | date:'yyyy-MM-dd'}}
                                        </mat-list-item>
                                    </mat-list>
                                </mat-card-content>
                                <mat-card-actions align="right">
                                    <button mat-flat-button color="accent" (click)="editCustomerDialog(searchCustomerData)">Bilgileri GÃ¼ncelle</button>
                                </mat-card-actions>
                            </mat-card>
                        </div>
                        <mat-divider [vertical]="true"></mat-divider>
                        <div fxFlex="40%">
                            <mat-card>
                                <mat-card-title>Ãœye KimliÄŸi</mat-card-title>
                                <mat-card-subtitle>
                                    Ãœyenin benzersiz QR kod bilgisi 
                                    <!--<b>{{searchCustomerData?.identityCode}}</b>-->
                                </mat-card-subtitle>
                                <mat-card-content>
                                    <qrcode #parent
                                            elementType="img"
                                            [qrdata]="customerQrCode"
                                            [width]="256"
                                            [errorCorrectionLevel]="'M'"
                                            [colorDark]="'#000000ff'"
                                            [colorLight]="'#ffffffff'"
                                            [cssClass]="'center'">
                                    </qrcode>
                                </mat-card-content>
                                <mat-card-actions align="center">
                                    <button mat-flat-button color="accent" (click)="saveAsImage(parent)">{{ 'GENERAL.DOWNLOADQRCODE' | translate }}</button>
                                </mat-card-actions>
                            </mat-card>
                        </div>
                    </div>
                </div>
                <div fxFlex="50%">
                    <!-- QR SEARCH -->
                    <mat-card>
                        <mat-card-title>Ãœye GiriÅŸ</mat-card-title>
                        <mat-card-subtitle>Ãœye QR kodunu kameraya okutunuz.</mat-card-subtitle>
                        <mat-card-content>
                            <mat-form-field appearance="fill">
                                <select matNativeControl matInput (change)="onDeviceSelectChange($event.target.value)">
                                    <option value="" [selected]="!currentDevice">Cihaz SeÃ§ilmedi</option>
                                    <option *ngFor="let device of availableDevices" [value]="device.deviceId"
                                            [selected]="currentDevice && device.deviceId === currentDevice.deviceId">
                                        {{device.label}}
                                    </option>
                                </select>
                            </mat-form-field>
                            <zxing-scanner [torch]="torchEnabled" [(device)]="currentDevice" (scanSuccess)="onCodeResult($event)"
                                           [formats]="formatsEnabled" [tryHarder]="tryHarder" (permissionResponse)="onHasPermission($event)"
                                           (camerasFound)="onCamerasFound($event)" (torchCompatible)="onTorchCompatible($event)"></zxing-scanner>
                            <section class="results" *ngIf="qrResultString">
                                <div>
                                    <strong>{{ qrResultString }}</strong>
                                </div>
                                <button mat-icon-button (click)="clearResult()">&times;</button>
                            </section>
                        </mat-card-content>
                        <mat-card-actions align="justify">
                            <ng-container *ngIf="hasPermission === undefined">
                                <h2>Ä°zin bekleniyor.</h2>
                                <blockquote>
                                    CihazÄ±nÄ±zda kamera yoksa sizden herhangi bir izin istenmeyecektir.
                                </blockquote>
                            </ng-container>
                            <ng-container *ngIf="hasPermission === false">
                                <h2>Kamera iznini reddettiniz, onsuz hiÃ§bir ÅŸeyi tarayamayÄ±z. ðŸ˜ª</h2>
                            </ng-container>
                            <ng-container *ngIf="hasDevices === undefined">
                                <h2>Cihazlar kontrol edilemedi.</h2>
                                <blockquote>
                                    Bu, bazÄ± gÃ¼venlik hatalarÄ±ndan kaynaklanÄ±yor olabilir.
                                </blockquote>
                            </ng-container>
                            <ng-container *ngIf="hasDevices === false">
                                <h2>HiÃ§bir cihaz bulunamadÄ±.</h2>
                                <blockquote>
                                    CihazÄ±nÄ±za baÄŸlÄ± herhangi bir medya cihazÄ± olmadÄ±ÄŸÄ±na inanÄ±yorum.
                                </blockquote>
                            </ng-container>
                        </mat-card-actions>
                    </mat-card>
                </div>
            </div>

        </div>
        <mat-spinner *ngIf="this.showSpinner === true" style="margin:0 auto; margin-top:150px;">
        </mat-spinner>
    </mat-sidenav-content>
</mat-sidenav-container>